--[[
	
	/* TODO:
	
	1. Сделать проверку по серийнику жесткого диска. Получать из github gist с серийниками одобренных
	дисков. Выводить серийник как логин и пароль придумать (всё это в gist). Потом чекать равен ли логин серий-
	ному номеру. Выводить возможный логин на экран, при авторизации в аккаунт скрипта. [+]
	
	Как добавлять серийник в gist? - Возможно отправлять post запрос в ВК с серийниками и никами тех, чей серийник
	не нашли в gist. [+]
	
	При первой авторизации сохранять данные в ini. (Последующая авторизация не потребуется) [+]
	
	2. Допилить IP инфо (Чекер регов). [+]

	10. Авто-апдейт сделать [+]
	
	11. /gmuse при авторизации 
	
	5. Отправка бага через post запрос ВК/Telegram. [+]
	
	6. Добавить пару читов (WH, GM от взрывов/падений) 
	
	7. Добавить авто-принятие форм (как в старом) и просто ручное :) [+-]
	
	8. Изменение цвета вип чата (хуком). [-]
	
	9. Поспать.
	
	
	
	3. Сделать зло-ебучую двойную тему через "imgui.PushStyleColor(Что изменить, цвет в ImVec4)". [-]
	4. Сделать диалог между пользователем и мной в скрипте. Я через ВК. Попробывать, хз как (маленький приоритет).
	12. Вычесление флуда.
	
	
	*/
]]

--Защита от питона)
local function AAAAAAAAAAA()
	::A1111111111::
	::A2222222222::
	::A3333333333::
	goto A1111111111
	goto A2222222222
	goto A3333333333
end

local function ADC2()
	goto D366666
	::D366666::
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
    (""):__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()():__()
	goto D366666
	::A11111111112::
	::A22222222222::
	::A33333333332::
	goto A11111111112
	goto A22222222222
	goto A33333333332
end

if not getMoonloaderVersion then -- тут НЕ нужны скобки (можно также проверить тип переменной и убедиться, что это не функция)
    return print("This script requires MoonLoader to be installed")
end


-----------[[[[    ЗАВИСИМОСТИ    ]]]]-----------
    local imgui = require 'imgui'
    local inicfg = require 'inicfg'
    local vkeys = require 'vkeys'
	local patchAddr = 0x004B35A0
    local effil = require "effil"
	local mem = require "memory"
    local cjson = require "cjson"
    local sampev = require 'lib.samp.events'
    local mem = require "memory"
    local fa = require 'faIcons'
    local ffi = require "ffi"
    local encoding = require "encoding" --К переменным
    require 'lib.sampfuncs'
    require 'lib.moonloader'
    local Matrix3X3 = require "matrix3x3"
    local Vector3D = require "vector3d"
    local render = require 'lib.render'
	local copas = require 'copas'
	local http = require 'copas.http'
    imgui.ToggleButton = require('imgui_addons').ToggleButton
    encoding.default = 'CP1251'
    u8 = encoding.UTF8 
	script_name('RHelper')
	script_version('1.5')

-----------[[[[    ПЕРЕМЕННЫЕ    ]]]]-----------
    local main_window_state = imgui.ImBool(false)
    local recon_menu = imgui.ImBool(false)
    local az = imgui.ImBool(false)
	local add_zone = imgui.ImBool(false)
	local report = imgui.ImBool(false)
	local gps_help = imgui.ImBool(false)
	local check_ip = imgui.ImBool(false)
	local check_script = imgui.ImBool(false)
    local getBonePosition = ffi.cast("int (__thiscall*)(void*, float*, int, bool)", 0x5E4280)
    local tSelButtons = { "Основное", "Связь с разработчиком", "Информация" }
	local navigation = {
		current = 1,
		list = { "Home", "Settings", "Commands", "Commands 2", "Help" }
	}
	local settings = { -- Тут может быть подгрузка настроек через inicfg, но сейчас просто таблица, для примера
    widget = {
        posX = 400,
        posY = 400
    }
	}
	local forms = {
        ['warn'] = 3,
        ['kick'] = 1,
        ['ban'] = 3,
        ['mute'] = 1,
        ['jail'] = 2,
        ['fv'] = 3,
        ['get'] = 4,
		['hp'] = 1,
		['slap'] = 1,
        ['offget'] = 4,
        ['ipaccounts'] = 4,
        ['skick'] = 2,
        ['sethp'] = 2,
        ['skin'] = 3,
        ['unwarn'] = 3,
        ['banip'] = 4,
        ['unjail'] = 2,
        ['offban'] = 3,
        ['offwarn'] = 3,
        ['sban'] = 4,
        ['offjail'] = 3,
        ['offmute'] = 2,
        ['spcarid'] = 2,
        ['oad'] = 3,
        ['spawn'] = 3, 
        ['cc'] = 4}
    local sWindows = tSelButtons[1]
    local font_e = renderCreateFont("Tahoma", 10, 4)
	local font1 = renderCreateFont("Tahoma", 13, 8)
    local selectable = 0
    local player_spec = ''
    local veh_spec = ''
    local keyToggle_cw = VK_MBUTTON
    local keyApply = VK_RBUTTON
    local step_auth = 0
	local report_id = ''
    local filter = ""
	local name_report_adv = ''
	local id_report_adv = ''
	local text_report_adv = ''
	local nick_report = ''
	local question_report = ''
	local recon_text = ''
	local id_dialog_report = ''
	local ip_info = ''
	local distances = ''
	local ping_sp = ''
	local hp_sp = '' 
	local arm_sp = '' 
	local version_sp = '' 
	local ip_sp = ''
	local serial = ''
    local new_form = nil
	local password_script_from_json = ''
	local is_auth = false
	local is_script_auth = false
	local rdata = {}
    local for_render = {}
    keyToggle = VK_F5
    secondaryKey = VK_B
    positionX = 10
    positionY = 375
    pagesize = 13
    messagesMax = 500
    blacklist = {
        'AFK',
        }

	

    ---------- [[[[ INI CFG ]]]] ------------
        local main_config = {
            amenu_config = {
                password_acc = '',
                password_adm = '',
                autologin_acc = false,
                autologin_adm = false,
                clickwarp = false,
                emenu = false,
				custom_report = true,
                admin_lvl = 1,
                auth_inter = 0,
                auth_ld = 0,
				auth_fleader = 0,
				password_of_script = '',
				auth_skin = 0,
				auth_inter = 0,
				gmuse = false,
				MoveWidget = false,
				togphone = false,
				gmped = false,
				hp = false,
				
            }
        }
		
		local adm_zone = {
			az = {
                ["AZ #1"] = "2570,-1281,1065, INT: 2",
		        ["AZ #2"] = "1221, 8, 1001, INT: 2"
            }
		}
		local all = {
			vazhnoe = {},
			raboti = {},
			gosski = {},
			nelegal = {},
			avto = {},
			prochee = {},
			poisk = {}
		}
	local gps_cfg = inicfg.load(all, 'RHelper\\GPS\\GPS.ini')
    local main_cfg = inicfg.load(main_config, "RHelper\\Config\\main_config.ini")
	local admin_zone = inicfg.load(adm_zone, "RHelper\\Config\\admin_zones.ini")
    local auto_auth = imgui.ImBool(main_config.amenu_config.autologin_acc)
    local auto_auth_adm = imgui.ImBool(main_config.amenu_config.autologin_adm)
	local custom_report_imgui = imgui.ImBool(main_config.amenu_config.custom_report)
    local clickwarp = imgui.ImBool(main_config.amenu_config.clickwarp)
    local emenu = imgui.ImBool(main_config.amenu_config.emenu)
	local bubble_chat_imgui = imgui.ImBool(main_config.amenu_config.bubble_chat)
	local gmuse = imgui.ImBool(main_config.amenu_config.gmuse)
	local togphone = imgui.ImBool(main_config.amenu_config.togphone)
	local hp = imgui.ImBool(main_config.amenu_config.hp)
    local password_acc = imgui.ImBuffer(256)
	local answer = imgui.ImBuffer(256)
	local Xinput = imgui.ImBuffer(256)
	local Yinput = imgui.ImBuffer(256)
	local Zinput = imgui.ImBuffer(256)
	local intInput = imgui.ImBuffer(256)
	local nameint = imgui.ImBuffer(256)
	local bug = imgui.ImBuffer(256)
	local login_script = imgui.ImBuffer(256)
	local password_script = imgui.ImBuffer(256)
	local ip_info = imgui.ImBuffer(512)
    local admin_lvl = imgui.ImInt(1)
    local auth_skin = imgui.ImInt(0)
	
    local auth_inter = imgui.ImInt(0)
    local auth_ld = imgui.ImInt(0)
	local auth_fleader = imgui.ImInt(0)
	local dialog_status = false
	local image_vk_ico = nil
    local password_adm = imgui.ImBuffer(256)
    password_adm.v = main_config.amenu_config.password_adm
    admin_lvl.v = main_config.amenu_config.admin_lvl
    password_acc.v = main_config.amenu_config.password_acc
    auth_skin.v = main_config.amenu_config.auth_skin
    auth_inter.v = main_config.amenu_config.auth_inter
	auth_fleader.v = main_config.amenu_config.auth_fleader
    auth_ld.v = main_config.amenu_config.auth_ld

-----------[[[[    ФУНКЦИИ    ]]]]-----------
    function main()
        while not isSampAvailable() do wait(50) end
        initializeRender()
        if not isSampfuncsLoaded() or not isSampLoaded() then
            return
        end
        if not doesDirectoryExist('moonloader\\config\\RHelper') then
            createDirectory('moonloader\\config\\RHelper') -- [[ Создаем директорию скрипта ]] 
            createDirectory('moonloader\\config\\RHelper\\GPS') -- [[ Создаем директорию скрипта ]] 
            createDirectory('moonloader\\config\\RHelper\\Icons') -- [[ Создаем директорию скрипта ]] 
            createDirectory('moonloader\\config\\RHelper\\Config') -- [[ Создаем директорию скрипта ]]
            inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini') 
			
        end
		downloadUrlToFile('https://pngicon.ru/file/uploads/vk-256x256.png', 'moonloader\\config\\RHelper\\Icons\\vk_ico.png')
		check_account()
		
		image_vk_ico = imgui.CreateTextureFromFile("moonloader\\config\\RHelper\\Icons\\vk_ico.png")
        bubbleBox = ChatBox(pagesize, blacklist)
        if autoupdate_loaded and enable_autoupdate and Update then
        pcall(Update.check, Update.json_url, Update.prefix, Update.url)
   		end

        ---------[[[[ КОМАНДЫ ]]]]---------
            sampRegisterChatCommand('amenu', function()
			if is_script_auth then
				main_window_state.v = not main_window_state.v
				imgui.Process = main_window_state.v
			end
            end)
            sampRegisterChatCommand('az', function()
               if is_script_auth then
				az.v = not az.v
                imgui.Process = az.v
				end
                end)
			sampRegisterChatCommand("caps", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 25 CapsLock")
				end
			end)
		  sampRegisterChatCommand("flood", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 30 Flood")
				end
			end)
			sampRegisterChatCommand("floodtr", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 30 Flood /tr")
				end
			end)
			sampRegisterChatCommand("mattr", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 30 Мат в /tr")
				end
			end)
			sampRegisterChatCommand("osktr", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 30 Оскорбление в /tr")
				end
			end)
		  sampRegisterChatCommand("mat", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 20 Мат")
				end
			end)
		  sampRegisterChatCommand("mg", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 15 Meta Gaming (MG)")
				end
			end)
		  sampRegisterChatCommand("trans", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 15 Translite")
				end
			end)
		  sampRegisterChatCommand("nrptry", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 40 NonRP /try")
				end
			end)
		  sampRegisterChatCommand("nrpme", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 40 NonRP /me")
				end
			end)
		  sampRegisterChatCommand("nrpdo", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 40 NonRP /do")
				end
			end)
		  sampRegisterChatCommand("nrpad", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 60 NonRP ad")
				end
			end)
		  sampRegisterChatCommand("oskadm", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 60 Оскорбление Администрации")
				end
			end)
		  sampRegisterChatCommand("osk", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 30 Оскорбление")
				end
			end)
		  sampRegisterChatCommand("neadm", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 60 Выдача себя за администратора")
				end
			end)
		  sampRegisterChatCommand("pomeha", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/kick "..id.." Помеха")
				end
			end)
		  sampRegisterChatCommand("reklama", function(id)
				if #id == 0 then
					return sampAddChatMessage('{66FF99}[RHelper]: {FF0000}Вы не ввели ID игрока',-1)
				else
					sampSendChat("/mute "..id.." 120 Реклама стронних ресурсов")
				end
			end)
			sampRegisterChatCommand("dm", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 40 Death Match (DM)')
				else
					sampSendChat('/a /jail ' ..id.. ' 40 Death Match (DM) // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("bagspawn", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 1 Баг спавна')
				else
					sampSendChat('/a /jail ' ..id.. ' 1 Баг спавна // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("hpme", function(id)
				if admin_lvl.v >= 1 then
					sampSendChat('/hp ' .. select(2, sampGetPlayerIdByCharHandle(PLAYER_PED)))
				end
				end)
			sampRegisterChatCommand("shp", function(id)
				if admin_lvl.v >= 3 then
					sampSendChat('/sethp ' ..id.. ' 160')
				else
					sampSendChat('/a /sethp ' ..id.. ' 160')
				end
			end)
			sampRegisterChatCommand("shpme", function(id)
				if admin_lvl.v >= 3 then
					sampSendChat('/sethp ' .. select(2, sampGetPlayerIdByCharHandle(PLAYER_PED)) ..' 160')
				else
					sampSendChat('/a /sethp ' .. select(2, sampGetPlayerIdByCharHandle(PLAYER_PED)) ..' 160')
				end
			end)
			sampRegisterChatCommand("мпстрой", function(id)
				if admin_lvl.v >= 1 then
					sampSendChat('/s Все строй хелпа не нужна,кто не в строю сразу spawn')
				end
				end)
			sampRegisterChatCommand("proverka", function(id)
					sampSendChat('АФК либо ОФФ = БАН , Проверка на Использование Запрещенных Программ Добавляйтесь в Discord Ислам#5591 , у вас 5 минут)')
				end)
			sampRegisterChatCommand("mesp", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/spawn ' .. select(2, sampGetPlayerIdByCharHandle(PLAYER_PED)))
				else
					sampSendChat('/a /spawn ' .. select(2, sampGetPlayerIdByCharHandle(PLAYER_PED)))
				end
				end)
			sampRegisterChatCommand("cnn", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/oad [INFO] CNN активнее!')
				else
					sampSendChat('/a /oad [INFO] CNN активнее!')
				end
				end)
			sampRegisterChatCommand("db", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 30 Drive By (DB)')
				else
					sampSendChat('/a /jail ' ..id.. ' 30 Drive By (DB) // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("tk", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 30 Team Kill (TK)')
				else
					sampSendChat('/a /jail ' ..id.. ' 30 Team Kill (TK) // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("pg", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 50 Power Gaming (PG)')
				else
					sampSendChat('/a /jail ' ..id.. ' 50 Power Gaming (PG) // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("sk", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 60 Spawn Kill (SK)')
				else
					sampSendChat('/a /jail ' ..id.. ' 60 Spawn Kill (SK) // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("rk", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 40 Repeat Kill (RK)')
				else
					sampSendChat('/a /jail ' ..id.. ' 40 Repeat Kill (RK) // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("sbiv", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 60 Сбив Анимации')
				else
					sampSendChat('/a /jail ' ..id.. ' 60 Сбив Анимации // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("sbivkb", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Анимации Корабль')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Анимации Корабль // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("npvch", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Нарушение правил военной части')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 НПВЧ // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("наркозз", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 90 Продажа нарко в Зелённой зоне')
				else
					sampSendChat('/a /jail ' ..id.. ' 90 Продажа нарко в Зелённой зоне // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("ганзз", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 90 Продажа оружия в ЗЗ')
				else
					sampSendChat('/a /jail ' ..id.. ' 90 Продажа оружия в ЗЗ // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("dmzz", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 90 Death Match (DM) ЗЗ')
				else
					sampSendChat('/a /jail ' ..id.. ' 90 Death Match (DM) ЗЗ // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("нонрпакс", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 30 NonRP аксессуар')
				else
					sampSendChat('/a /jail ' ..id.. ' 30 NonRP аксессуар // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("taran", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 30 Таран')
				else
					sampSendChat('/a /jail ' ..id.. ' 30 Таран // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("неадекват", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/ban ' ..id.. ' 3 Неадекват')
				else
					sampSendChat('/a /ban ' ..id.. ' 3 Неадекват // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("dmslet", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/ban ' ..id.. ' 3 Дм на слёте')
				else
					sampSendChat('/a /ban ' ..id.. ' 3 Дм на слёте // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("nokr", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/ban ' ..id.. ' 15 НОКР')
				else
					sampSendChat('/a /ban ' ..id.. ' 15 НОКР // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("cheat", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/ban ' ..id.. ' 30 Использование запрещенных программ')
				else
					sampSendChat('/a /ban ' ..id.. ' 30 ИЗП // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("soft", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/ban ' ..id.. ' 30 Хранение Чит софта')
				else
					sampSendChat('/a /ban ' ..id.. ' 30 Хранение Чит софта // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("dsoft", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/ban ' ..id.. ' 30 Отказ от проверки на софт')
				else
					sampSendChat('/a /ban ' ..id.. ' 30 Отказ от проверки на софт // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("сбивп", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Pirus')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Pirus // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("сбивв", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Vagos')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Vagos // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("сбива", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Aztec')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Aztec // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("внекв", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 60 Вне Квадрата')
				else
					sampSendChat('/a /jail ' ..id.. ' 60 Вне Квадрата // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("сбивр", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Rifa')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Rifa // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("сбивг", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Grove')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Grove // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("сбивб", function(id)
				if admin_lvl.v >= 2 then
					sampSendChat('/jail ' ..id.. ' 120 Сбив Ballas')
				else
					sampSendChat('/a /jail ' ..id.. ' 120 Сбив Ballas // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
				end
				end)
			sampRegisterChatCommand("skinid", function (id)
				if admin_lvl.v > 0 then
					MODEL = tonumber(id)

					if MODEL then
						_, id = sampGetPlayerIdByCharHandle(PLAYER_PED)

						set_player_skin(id, MODEL)
						sampAddChatMessage(string.format("[RHelper] {FFFFFF} Вы выбрали скин под ID [%d]", MODEL), 6591981)
					end
				else
					sampAddChatMessage("[Universal Helper] {FFFFFF} Введите номер скина [0 - 311]", 6591981)
				end
			end)
			sampRegisterChatCommand('checkip', function(arg)
			if is_script_auth then
				chip(arg)
			end
			end)
			
			sampRegisterChatCommand('login', function(arg)
			if not is_script_auth then
				check_account()
			else
				info_msg('Вы уже авторизованы!')
			end
			end)
            sampRegisterChatCommand('unlogin', function(arg)
                if not is_script_auth then
                    info_msg('Вы не авторизованы!')
                else
                    info_msg('Разлогинимся...')
                    is_script_auth = not is_script_auth
                    info_msg('Успешно!')
                end
                end)
			sampRegisterChatCommand('mypos', function()
				local x, y, z = getCharCoordinates(playerPed)
				local interior = getCharActiveInterior(playerPed)
				local coords = (string.format("%.0f, %.0f, %.0f", x, y, z))
				info_msg('Координаты скопированы --> '..coords)
				info_msg('Interior: {EE82EE}' .. interior)
	            setClipboardText(coords)

			end)
        if not doesFileExist(getWorkingDirectory() .. '\\config\\RHelper\\GPS\\GPS.ini') then
            print('Отсутствует INI-файл (файл с настройками). Уже качаю :)')
            downloadUrlToFile('https://raw.githubusercontent.com/M0rtelli/STools/main/config/GPS.ini', getWorkingDirectory() .. '/config/RHelper/GPS/GPS.ini')
        end
        while true do


            -- Bubble chat 
                if main_config.amenu_config.bubble_chat == true then
					bubbleBox.active = true
                    bubbleBox:toggle(bubbleBox.active)
				else
					bubbleBox.active = false
                    bubbleBox:toggle(bubbleBox.active)
                end
        
                if bubbleBox.active and is_script_auth then
                    bubbleBox:draw(positionX, positionY)
                    if is_key_check_available() and isKeyDown(secondaryKey) then
                        if getMousewheelDelta() ~= 0 then
                            bubbleBox:scroll(getMousewheelDelta() * -1)
                        end
                    end
                end
            -- E-menu
                if isKeyDown(69) and main_config.amenu_config.emenu and not sampIsChatInputActive() and not sampIsDialogActive() and is_script_auth then
                    -- isKeyDown(69) do
                        --wait(0)
						local player = getNearCharToCenter(150)
						local x, y = getScreenResolution()
						if player then
							local _, playerId = sampGetPlayerIdByCharHandle(player)
							local nick = sampGetPlayerNickname(playerId)
							local health = getCharHealth(player)
							local armour = getCharArmour(player)
							renderFigure2D(x/2, y/2, 75, 160, 0xFFFFFFFF) -- нарисует круг с белой обводкой
							local plX, plY, plZ = getBodyPartCoordinates(8, player)
							local plsX, plsY = convert3DCoordsToScreen(plX, plY, plZ)
							renderDrawLine(x/2, y/2, plsX, plsY, 2.0, 0xFFFFFFFF)
							renderFontDrawText(font_e, '{FF0000}1{EEEEEE} - Войти в наблюдение', (x/2)+175, (y/2)-100, 0xEEEEEEEE)
							renderFontDrawText(font_e, '{FF0000}2{EEEEEE} - Слапнуть', (x/2)+175, (y/2)-75, 0xEEEEEEEE)
							renderFontDrawText(font_e, '{FF0000}3{EEEEEE} - Заспавнить', (x/2)+175, (y/2)-50, 0xEEEEEEEE)
							renderFontDrawText(font_e, '{FF0000}5{EEEEEE} - Выдать HP', (x/2)+175, (y/2)-25, 0xEEEEEEEE)
							renderFontDrawText(font_e, '{FF0000}8{EEEEEE} - Разморозить', (x/2)+175, (y/2)+25, 0xEEEEEEEE)
							renderFontDrawText(font_e, '{FF0000}7{EEEEEE} - Заморозить', (x/2)+175, (y/2)+50, 0xEEEEEEEE)
							renderFontDrawText(font_e, '{FF0000}R{EEEEEE} - Написать игроку', (x/2)+175, (y/2)+0, 0xEEEEEEEE)
							renderFontDrawText(font_e, nick .. '[' .. playerId .. ']', plsX-75, plsY, 0xFFFF0000)
							renderFontDrawText(font_e, 'HP: {FF0000}' .. health .. '{EEEEEE} | Armor: {FF0000}' .. armour .. '{EEEEEE}', (x/2)-70, (y/2)+175, 0xEEEEEEEE)
							renderDrawPolygon(x/2, y/2, 10, 10, 8, 0, 0xFFB3FF00)
							renderDrawPolygon(plsX, plsY, 7, 7, 5, 0, 0xFFB3FF00)

							if isKeyJustPressed(VK_1) then
								sampSendChat('/sp ' .. playerId)
							end

							if isKeyJustPressed(VK_2) then
								sampSendChat('/slap ' .. playerId)
							end
							
							if isKeyJustPressed(VK_5) then
								sampSendChat('/hp ' .. playerId)
							end
							
							if isKeyJustPressed(VK_8) then
								if admin_lvl.v >= 3 then
									sampSendChat('/unfreeze ' .. playerId)
								else
									sampSendChat('/a /unfreeze ' .. playerId)
								end
							end
							
							if isKeyJustPressed(VK_7) then
								if admin_lvl.v >= 3 then
									sampSendChat('/freeze ' .. playerId)
								else
									sampSendChat('/a /freeze ' .. playerId)
								end
							end
							
							if isKeyJustPressed(VK_R) then
								sampSetChatInputEnabled(true)
								sampSetChatInputText('/pm ' .. playerId .. ' ')
							end

							if isKeyJustPressed(VK_3) then
								if admin_lvl.v >= 3 then
									sampSendChat('/spawn ' .. playerId)
								else
									sampSendChat('/a /spawn ' .. playerId)
								end
							end
						end
						
                    --end
                end
            -- CLICK WARP

                while isPauseMenuActive() do
                    if cursorEnabled then
                        showCursor(false)
                    end
                    wait(0)
                end
            
                if isKeyJustPressed(keyToggle_cw) and main_config.amenu_config.clickwarp and is_script_auth then
                    cursorEnabled = not cursorEnabled
                    showCursor(true)
                    --while isKeyDown(keyToggle_cw) do wait(0) end
                end
            
                if cursorEnabled then
                        if imgui.Process == false then
                    local mode = sampGetCursorMode()
                    if mode == 0 then
                        showCursor(true)
                    end
                    local sx, sy = getCursorPos()
                    local sw, sh = getScreenResolution()
                    -- is cursor in game window bounds?
                    if sx >= 0 and sy >= 0 and sx < sw and sy < sh then
                        local posX, posY, posZ = convertScreenCoordsToWorld3D(sx, sy, 700.0)
                        local camX, camY, camZ = getActiveCameraCoordinates()
                        -- search for the collision point
                        local result, colpoint = processLineOfSight(camX, camY, camZ, posX, posY, posZ, true, true, false, true, false, false, false)
                        if result and colpoint.entity ~= 0 then
                        local normal = colpoint.normal
                        local pos = Vector3D(colpoint.pos[1], colpoint.pos[2], colpoint.pos[3]) - (Vector3D(normal[1], normal[2], normal[3]) * 0.1)
                        local zOffset = 300
                        if normal[3] >= 0.5 then zOffset = 1 end
                        -- search for the ground position vertically down
                        local result, colpoint2 = processLineOfSight(pos.x, pos.y, pos.z + zOffset, pos.x, pos.y, pos.z - 0.3,
                            true, true, false, true, false, false, false)
                        if result then
                            pos = Vector3D(colpoint2.pos[1], colpoint2.pos[2], colpoint2.pos[3] + 1)
                
                            local curX, curY, curZ  = getCharCoordinates(playerPed)
                            local dist              = getDistanceBetweenCoords3d(curX, curY, curZ, pos.x, pos.y, pos.z)
                            local hoffs             = renderGetFontDrawHeight(font)
                
                            sy = sy - 2
                            sx = sx - 2
                            renderFontDrawText(font, string.format("%0.2fm", dist), sx, sy - hoffs, 0xEEEEEEEE)
                
                            local tpIntoCar = nil
                            if colpoint.entityType == 2 then
                            local car = getVehiclePointerHandle(colpoint.entity)
                            if doesVehicleExist(car) and (not isCharInAnyCar(playerPed) or storeCarCharIsInNoSave(playerPed) ~= car) then
                                displayVehicleName(sx, sy - hoffs * 2, getNameOfVehicleModel(getCarModel(car)))
                                local color = 0xAAFFFFFF
                                if isKeyDown(VK_RBUTTON) then
                                tpIntoCar = car
                                color = 0xFFFFFFFF
                                end
                                renderFontDrawText(font2, "Hold right mouse button to teleport into the car", sx, sy - hoffs * 3, color)
                            end
                            end
                
                            createPointMarker(pos.x, pos.y, pos.z)
                
                            -- teleport!
                            if isKeyDown(keyApply) then
                            if tpIntoCar then
                                if not jumpIntoCar(tpIntoCar) then
                                -- teleport to the car if there is no free seats
                                teleportPlayer(pos.x, pos.y, pos.z)
                                end
                            else
                                if isCharInAnyCar(playerPed) then
                                local norm = Vector3D(colpoint.normal[1], colpoint.normal[2], 0)
                                local norm2 = Vector3D(colpoint2.normal[1], colpoint2.normal[2], colpoint2.normal[3])
                                rotateCarAroundUpAxis(storeCarCharIsInNoSave(playerPed), norm2)
                                pos = pos - norm * 1.8
                                pos.z = pos.z - 0.8
                                end
                                teleportPlayer(pos.x, pos.y, pos.z)
                            end
                            removePointMarker()
                
                            --while isKeyDown(keyApply) do wait(0) end
                            showCursor(false)
                        end
                    end
                    end
                end
                end
                end
				wait(0)
                removePointMarker()

                if isKeyJustPressed(VK_6) and not sampIsChatInputActive() and not sampIsDialogActive() and is_script_auth then
					imgui.ShowCursor = not imgui.ShowCursor
					showCursor(imgui.ShowCursor)
				end

                if isKeyJustPressed(VK_O) and not sampIsChatInputActive() and not sampIsDialogActive() and is_script_auth then
					if new_form ~= nil then
                        sampSendChat(new_form)
                        printStyledString('Succes!', 2000, 2)
                        new_form = nil
                    else
                        printStyledString('None form', 2000, 2)
                    end
				end

                if sampIsLocalPlayerSpawned() then
					is_auth = true
				end
				
				if isKeyJustPressed(VK_U) and not sampIsChatInputActive() and not sampIsDialogActive() and is_script_auth then
					sampSetChatInputEnabled(true)
					sampSetChatInputText('/mute ' .. id_report_adv .. ' 120 упоминание родных')
                end
				
				if isKeyJustPressed(VK_I) and not sampIsChatInputActive() and not sampIsDialogActive() and is_script_auth then
					if admin_lvl.v >= 3 then
						sampSetChatInputEnabled(true)
						sampSetChatInputText('/ban ' .. id_report_adv .. ' 15 НОКР')
					else
						sampSetChatInputEnabled(true)
						sampSetChatInputText('/a /ban ' .. id_report_adv .. ' 15 НОКР // ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
					end
				end
				if not sampIsChatInputActive() then
					if isKeyJustPressed(46) then
						if gmped == false then
							setCharProofs(playerPed, true, true, true, true, true)
							writeMemory(0x96916E, 1, 1, false)
							gmped = true
							printStringNow("~g~GameMode On", 1000)
						elseif gmped ~= false then
							setCharProofs(playerPed, false, false, false, false, false)
							writeMemory(0x96916E, 1, 0, false)
							gmped = false
							printStringNow("~r~GameMode Off", 1000)
						end
					end
				end
				
				if isKeyJustPressed(52) and not sampIsChatInputActive() then
					dialog_status = not sampIsDialogActive()
                    enableDialog(not sampIsDialogActive())
                end

                    -- добавить включение тексдравов в /amenu

                for i = 151, 168 do
                    if sampTextdrawIsExists(i) then
                        sampTextdrawDelete(i)
                    end
                end
            end
    end
	

	function doCheatWork()
		if gmped == true and isCharDead(playerPed) then
			setCharProofs(playerPed, false, false, false, false, false)
			writeMemory(0x96916E, 1, 0, false)	
			gmped = false
			printStringNow("~r~GameMode Off", 1000)
		end
	end

	function isKeyCheckAvailable()
		if not isSampfuncsLoaded() then
			return true
		end
		return not isSampfuncsConsoleActive() and not sampIsChatInputActive() and not sampIsDialogActive()
	end
		
	
	function check_account()
		local ffi = require("ffi")
		ffi.cdef[[
		int __stdcall GetVolumeInformationA(
			const char* lpRootPathName,
			char* lpVolumeNameBuffer,
			uint32_t nVolumeNameSize,
			uint32_t* lpVolumeSerialNumber,
			uint32_t* lpMaximumComponentLength,
			uint32_t* lpFileSystemFlags,
			char* lpFileSystemNameBuffer,
			uint32_t nFileSystemNameSize
		);
		]]
		serial = ffi.new("unsigned long[1]", 0)
		ffi.C.GetVolumeInformationA(nil, nil, 0, serial, nil, nil, nil, 0)
		serial = tostring(serial[0])
		login_script.v = tostring(serial)
		get_gist("https://gist.githubusercontent.com/mgvq/ef9e73826a5c8dbe4468083b97e9cb79/raw/6970a83a88a76ccf6516bc8bbd974e361c3d82c3/RHelper")
		autoupdate("https://gist.githubusercontent.com/mgvq/cd4eb26c18e61d9ebd5703cfcacd1dfb/raw/a59072810f245dc16a6bd897031e2fe6785d07d3/autoupdate", '{00FFFF}[RHelper]: ', "https://github.com/mgvq/RHelper.luac/tree/main")
	end

	
	function get_gist(json_url, prefix)
	  local dlstatus = require('moonloader').download_status
	  local json = getWorkingDirectory() .. '\\'..thisScript().name..'-gist.json'
	  if doesFileExist(json) then os.remove(json) end
	  downloadUrlToFile(json_url, json,
		function(id, status, p1, p2)
		  if status == dlstatus.STATUSEX_ENDDOWNLOAD then
			if doesFileExist(json) then
			  local f = io.open(json, 'r')
			  if f then
				local info = decodeJson(f:read('*a'))
				for k,v in pairs(info) do
					if k == serial then
						password_script_from_json = tostring(v)
					end
				end
				if main_config.amenu_config.password_of_script == password_script_from_json then
					if main_config.amenu_config.password_of_script ~= '' then
						is_script_auth = true
					else
						check_script.v = not check_script.v
						imgui.Process = check_script.v
					end
				else
					check_script.v = not check_script.v
					imgui.Process = check_script.v
				end
				f:close()
				os.remove(json)
			  end
			else
			  print('v'..thisScript().version..': Не могу проверить. Смиритесь. ')
			  update = false
			end
		  end
		end
	  )
	
	end

	
-----------[[[[    fucked IMGUI    ]]]]-----------

	local fontsize = nil
    local fontsize_small = nil
	local font_test = nil
	local font_medium = nil
	function imgui.BeforeDrawFrame()
		if fontsize == nil then
			fontsize = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 24.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
		end
		if font_medium == nil then
			font_medium = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 18.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
		end
        if fontsize_small == nil then
			fontsize_small = imgui.GetIO().Fonts:AddFontFromFileTTF(getFolderPath(0x14) .. '\\trebucbd.ttf', 11.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
		end
		if font_test == nil then
			font_test = imgui.GetIO().Fonts:AddFontFromFileTTF('moonloader\\resource\\fonts\\Aronder.otf', 24.0, nil, imgui.GetIO().Fonts:GetGlyphRangesCyrillic()) -- вместо 30 любой нужный размер
		end
		
	end

    function imgui.OnDrawFrame()
        local so, sp = getScreenResolution()
		local entered_text = sampGetCurrentDialogEditboxText()
        if not main_window_state.v and not recon_menu.v and not az.v and not add_zone.v and not report.v and not gps_help.v and not check_ip.v and not check_script.v then
            imgui.Process = false
        end
		if not is_script_auth then
			if main_window_state.v and recon_menu.v and az.v and  add_zone.v and  report.v and  gps_help.v and  check_ip.v then
				imgui.Process = false
			end
		end
		
		
        if main_window_state.v then
            bluetheme()
            imgui.SetNextWindowPos(imgui.ImVec2(so / 4, sp / 5))
            imgui.SetNextWindowSize(imgui.ImVec2(800, 500))
            imgui.Begin(u8'Admin Menu || Ryan_Xstyle ©', main_window_state)
            imgui.BeginGroup()
                --imgui.BeginChild('##кнопки', imgui.ImVec2(190, 460), true)
                    --[[for _, nButton in pairs(tSelButtons) do
                        if imgui.SelButton(sWindows == nButton, u8(nButton), imgui.ImVec2(170, 40)) then 
                            sWindows = nButton
                        end
                    end]]
					
                --imgui.EndChild()
            imgui.EndGroup()
			local width = imgui.GetWindowWidth()
    		imgui.SetCursorPosX(178)
			imgui.PushFont(fontsize)
				for i, title in ipairs(navigation.list) do
					if HeaderButton(navigation.current == i, title) then
						navigation.current = i
					end
					if i ~= #navigation.list then
						imgui.SameLine(nil, 30)
					end
				end
			imgui.PopFont()
			--	imgui.Separator()
            --imgui.SameLine()
            imgui.BeginChild('##render', imgui.ImVec2(780, 428), true)
			

                if navigation.current == 1 then
                    imgui_main()
                end
                if navigation.current == 2 then
                    imgui_settings()
                end
                if navigation.current == 3 then
                    imgui_commands()
                end
				if navigation.current == 4 then
                    imgui_donate()
                end
				if navigation.current == 5 then
                    imgui_about()
                end
            imgui.EndChild()
            imgui.End()
        end

        if az.v then
            bluetheme()
            local so, sp = getScreenResolution()
            imgui.SetNextWindowPos(imgui.ImVec2(so / 2.5, sp / 2), imgui.ImVec2(0.5, 0.5))
            imgui.SetNextWindowSize(imgui.ImVec2(300, 250))
            imgui.Begin(u8"Admin's Zone's || Ryan_Xstyle ©", az)
			showCursor(true)
            for name, coord in pairs(adm_zone.az) do
                local x, y, z, interior_id = coord:match("(.*),(.*),(.*), INT: (%d+)")
                if filter == "" then
                    imgui.PushItemWidth(36)
                    show_entry(name, tonumber(x), tonumber(y), tonumber(z), interior_id)
                else
                    if string.upper(name):find(string.upper(filter)) ~= nil  then
                        imgui.PushItemWidth(36)
                        show_entry(name, tonumber(x), tonumber(y), tonumber(z),interior_id)
                end
                end
            end
            if imgui.Button(u8'Add Admin Zone (local)', imgui.ImVec2(275, 25)) then
				az.v = not az.v
				add_zone.v = not add_zone.v
				imgui.Process = add_zone.v
            end
            imgui.End()
		end
		
		if add_zone.v then
			bluetheme()
				local so, sp = getScreenResolution()
				imgui.SetNextWindowPos(imgui.ImVec2(so / 3, sp / 2), imgui.ImVec2(0.5, 0.5))
				imgui.SetNextWindowSize(imgui.ImVec2(500, 175)) --imgui.WindowFlags.MenuBar
				imgui.Begin(u8"Admin Zone's || Ryan_Xstyle ©", add_zone)
				showCursor(true)
				
				imgui.SameLine(nil, 30)
				imgui.Columns(4, _, true)
				imgui.Separator()
			  --  imgui.SetColumnWidth(-1, 75)
				imgui.PushItemWidth(75)
				imgui.InputText(' X', Xinput)
				imgui.PopItemWidth()
				
				imgui.NextColumn()
				
				--imgui.SetColumnWidth(-1, 80) 
				imgui.PushItemWidth(75)
				imgui.InputText(' Y', Yinput)
				imgui.PopItemWidth()	
					
				imgui.NextColumn()
				
			   -- imgui.SetColumnWidth(-1, 80)
				imgui.PushItemWidth(75)
				imgui.InputText(' Z', Zinput)
				imgui.PopItemWidth()
					
				imgui.NextColumn() 
				--imgui.SetColumnWidth(-1, 80) 
				imgui.PushItemWidth(75)
				imgui.InputText(' INT', intInput)
				imgui.PopItemWidth()  
				
				imgui.Columns(1, _, true)
				imgui.Separator()
				imgui.InputText(' Name', nameint)
				imgui.SameLine(nil, 15)
				hint('Строго на английском!')
				if imgui.Button(u8'Добавить', imgui.ImVec2(475, 30)) then
					local xitog = tonumber(Xinput.v)
					local yitog = tonumber(Yinput.v)
					local zitog = tonumber(Zinput.v)
					local intitog = tonumber(intInput.v)
					local nameintitog = ''
					if nameint.v == '' then
						nameintitog = 'New AZ'
					else
						nameintitog = nameint.v
					end
					
					if xitog == nil or yitog == nil or zitog == nil or intitog == nil then
						sampAddChatMessage('[RHelper]: Данные введены некорректно!', 0x1E90FF)
					else
						local itog = string.format(xitog .. ',' .. yitog .. ',' .. zitog .. ', INT: ' .. intitog)
						adm_zone.az[nameintitog] = itog
						inicfg.save(admin_zone, 'RHelper\\Config\\admin_zones.ini')
						sampAddChatMessage('[RHelper]: Новая админ-зона успешно была добавлена!', 0x1E90FF)
						add_zone.v = not add_zone.v
					end
				end
				if imgui.Button(u8'Закрыть', imgui.ImVec2(475, 30)) then
					add_zone.v = not add_zone.v
				end
				
				
				imgui.End()
		end

        if recon_menu.v then
            recon_style()
			imgui.SetNextWindowPos(imgui.ImVec2(so / 1.732, sp / 1.327))
            imgui.SetNextWindowSize(imgui.ImVec2(580, 190))
            imgui.Begin(u8'Admin Menu || Ryan_Xstyle ©', recon_menu)
			
            if imgui.CustomButton(u8'<< Back', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSendChat('/sp ' .. tonumber(player_spec) - 1)
            end
                imgui.SameLine()

			if imgui.Button(u8'Slap', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSendChat('/slap '.. player_spec)
            end
            imgui.SameLine()
			if imgui.Button('Kick', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSetChatInputEnabled(true)
				sampSetChatInputText('/kick ' .. player_spec .. ' ')
            end
            imgui.SameLine()
			if imgui.Button('Mute', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSetChatInputEnabled(true)
				sampSetChatInputText('/mute ' .. player_spec .. ' ')
            end
            imgui.SameLine()
			if imgui.Button('Ban', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSetChatInputEnabled(true)
                if admin_lvl.v >= 3 then
				    sampSetChatInputText('/ban ' .. player_spec .. ' ')
                else
                    sampSetChatInputText('/a /ban ' .. player_spec .. ' ')
                end
            end
            imgui.SameLine()
			if imgui.Button('Warn', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                if admin_lvl.v >= 3 then
				    sampSetChatInputText('/warn ' .. player_spec .. ' ')
                else
                    sampSetChatInputText('/a /warn ' .. player_spec .. ' ')
                end
            end
            imgui.SameLine()
            if imgui.CustomButton(u8'Next >>', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSendChat('/sp ' .. tonumber(player_spec) + 1)
            end
            
            if veh_spec ~= '' then
                imgui.SetCursorPosX(205)
                if imgui.CustomButton(u8'/fv',imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    sampSendChat('/fv ' .. veh_spec)
                end
                imgui.SameLine()
				if imgui.CustomButton(u8'/sveh',imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    sampSendChat('/sveh ' .. player_spec)
                end
                imgui.SameLine()
				if imgui.CustomButton(u8'/spcarid',imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    sampSendChat('/spcarid ' .. veh_spec)
                end
            end
            
            if imgui.CustomButton(u8'PM',imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSetChatInputEnabled(true)
				sampSetChatInputText('/pm ' .. player_spec .. ' ')
            end
			
			imgui.SameLine()
						
			if imgui.Button(u8'Версия', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSendChat('/version ' .. player_spec)
            end
			imgui.SameLine()
						
			if imgui.Button(u8'Вы тут?', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                sampSendChat('/pm ' .. player_spec .. ' Вы тут? Ответ в /n')
            end
            imgui.SameLine()

			if imgui.Button(u8'Стата', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                if admin_lvl.v >= 2 then
                    sampSendChat('/stats ' .. player_spec)
                else
                    sampSetChatInputEnabled(true)
                    sampSetChatInputText('/a /stats ' .. player_spec .. ', ')
                end
            end
			imgui.SameLine()
			if imgui.Button(u8'Спавн', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                if admin_lvl.v >= 3 then
                    sampSendChat('/spawn ' .. player_spec)
                else
                    sampSendChat('/a /spawn ' .. player_spec)
                end
            end
			imgui.SameLine()
			if imgui.Button('/get', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                if admin_lvl.v >= 3 then
                    sampSendChat('/get ' .. player_spec)
                else
                    sampSendChat('/a /get ' .. player_spec)
                end
            end
			imgui.SameLine()
			if imgui.CustomButton(u8'Exit',imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    sampSendChat('/spoff')
            end
			
			if imgui.Button(u8'ТП к игроку', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						if admin_lvl.v >= 2 then
							sampSendChat('/spoff')
							wait(650)
							sampSendChat('/goto ' .. player_spec)
						else
                            local _, handle = sampGetCharHandleBySampPlayerId(player_spec)
							local x, y, z = getCharCoordinates(handle)
							local interior = getCharActiveInterior(handle)
							sampSendChat('/spoff')
							wait(650)
							setCharInterior(PLAYER_PED,interior_id)
							setInteriorVisible(interior_id)
							clearExtraColours(true)
							requestCollision(x,y)
							loadScene(x,y,z)
							activateInteriorPeds(true)
							teleport(x, y, z)
						end
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'ТП игрока', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/spoff')
						wait(650)
						sampSendChat('/gethere')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Приятной игры', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Приятной игры!')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'IP', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    chip(ip_sp)
            end
		
			imgui.SameLine()

			if imgui.Button(u8'/unfreeze', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
				if admin_lvl.v >= 4 then
					sampSendChat('/unfreeze ' .. player_spec)
				else
					sampSendChat('/a /unfreeze ' .. player_spec)
				end
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Слушаю', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок слушаю вас, что случилось?')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'TP CAR', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
				if admin_lvl.v >= 3 then
					sampSetChatInputEnabled(true)
					sampSetChatInputText('/getherecar ')
				else
					sampSendChat('/a Администраторы 3+ уровня телепортните игроку ID: ' .. player_spec ..  ' его машину')
				end
			end
			
			if imgui.Button(u8'Не вытаскиваем', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок  мы не вытаскиваем из воды так как это РП ситуация')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Тех. раздел', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок обратитесь в Технический раздел в Вконтакте @st_tp.')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Не чиним', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок не чиним машины это Role Play ситуация, вызовите механика /svc => Механик')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Застрял', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
				if admin_lvl.v >= 3 then
					sampSendChat('/spoff')
					wait(650)
					sampSetChatInputEnabled(true)
					sampSetChatInputText('/gethere ')
				else
					sampSendChat('/a Администраторы 2+ уровня помогите ID: [' .. player_spec .. '] он застрял')
				end
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'No TP Car', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок  мы не телепортируем машину ')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Не тепаем', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок  мы не телепортируем игроков ')
					end)
					
            end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Жалобу', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSendChat('/pm ' .. player_spec .. ' Уважаемый игрок оставьте жалобу тут f.santrope-rp ')
					end)
					
            end
			
			if imgui.Button(u8'Jail', imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(75, 23)) then
                    lua_thread.create(function()
						sampSetChatInputEnabled(true)
						sampSetChatInputText('/jail ' .. player_spec .. ' ')
					end)
					
            end
			imgui.SameLine()
			if imgui.Button(u8'Перезаход в рекон', imgui.ImVec2(125, 23)) then
				sampSendChat('/sp ' .. player_spec)
			end
			
			imgui.End()
		end
		if report.v then
			if custom_report_imgui.v then
				imgui.SetNextWindowPos(imgui.ImVec2(so / 3, sp / 2.5), imgui.ImVec2(0.5, 0.5))
				imgui.SetNextWindowSize(imgui.ImVec2(450, 250))
				imgui.Begin(u8'Report || Ryan_Xstyle ©', report)
				report_imgui()
				imgui.End()
			end
		end
		
		if check_ip.v then
			imgui.SetNextWindowPos(imgui.ImVec2(so / 2.8, sp / 2.7))
			imgui.SetNextWindowSize(imgui.ImVec2(325, 375))
			imgui.Begin(u8'IP INFO || Ryan_Xstyle ©', check_ip)
			bluetheme()
			imgui.InputTextMultiline("##земля тебе пухом, про название забыл", ip_info, imgui.ImVec2(300, 310))
			if imgui.Button(u8'Отправить в /a') then
				lua_thread.create(function()
					for i = 1, #rdata do
						if i > 1 then
							wait(700)
							sampSendChat('/a ------------------------')
						end
						wait(700)
						sampSendChat('/a IP - ' .. rdata[i]["query"])
						wait(700)
						sampSendChat('/a Страна - ' .. rdata[i]["country"])
						wait(700)
						sampSendChat('/a Город - ' .. rdata[i]["city"])
						wait(700)
						sampSendChat('/a Провайдер - ' .. rdata[i]["isp"])
						if i > 1 then
							wait(700)
							sampSendChat('/a Дистанция - ' .. distances)
						end
					end
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8'Отправить в чат') then
				lua_thread.create(function()
					for i = 1, #rdata do
						if i > 1 then
							wait(700)
							sampSendChat('------------------------')
						end
						wait(700)
						sampSendChat('IP - ' .. rdata[i]["query"])
						wait(700)
						sampSendChat('Страна - ' .. rdata[i]["country"])
						wait(700)
						sampSendChat('Город - ' .. rdata[i]["city"])
						wait(700)
						sampSendChat('Провайдер - ' .. rdata[i]["isp"])
						if i > 1 then
							wait(700)
							sampSendChat('Дистанция - ' .. distances)
						end
					end
				end)
			end
			imgui.End()
		end
		
		if gps_help.v then
			imgui.SetNextWindowPos(imgui.ImVec2(so / 2.8, sp / 2.2), imgui.ImVec2(0.5, 0.5))
			imgui.SetNextWindowSize(imgui.ImVec2(460, 400))
			imgui.Begin(u8'GPS Help || Ryan_Xstyle ©', gps_help, imgui.WindowFlags.NoMove + imgui.WindowFlags.NoCollapse)
			
			lua_thread.create(function()
						dialog_status = true
						enableDialog(true)
						imgui.BeginChild('##GPS', imgui.ImVec2(285, 337), true)
							
							if imgui.CollapsingHeader(u8'Важные') then
								for i=1, #all.vazhnoe do
									if imgui.Button(u8(all.vazhnoe[i]), imgui.ImVec2(260, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 1. Важное -> ' .. all.vazhnoe[i] .. ' Приятной игры ')
									end
								end
							end
							if imgui.CollapsingHeader(u8'Работы') then
								for i=1, #all.raboti do
									if imgui.Button(u8(all.raboti[i]), imgui.ImVec2(280, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 2. Работа -> ' .. all.raboti[i] .. ' Приятной игры ')
									end
								end
							end
							if imgui.CollapsingHeader(u8'Офф. орг') then
								for i=1, #all.gosski do
									if imgui.Button(u8(all.gosski[i]), imgui.ImVec2(280, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 3. Офф. орг -> ' .. all.gosski[i] .. ' Приятной игры ')
									end
								end
							end
							if imgui.CollapsingHeader(u8'Неофф. орг') then
								for i=1, #all.nelegal do
									if imgui.Button(u8(all.nelegal[i]), imgui.ImVec2(280, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 4. Нелегал. орг -> ' .. all.nelegal[i] .. ' Приятной игры ')
									end
								end
							end
							if imgui.CollapsingHeader(u8'Автосервисы') then
								for i=1, #all.avto do
									if imgui.Button(u8(all.avto[i]), imgui.ImVec2(280, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 5. Автосалоны -> ' .. all.avto[i] .. ' Приятной игры ')
									end
								end
							end
							if imgui.CollapsingHeader(u8'Прочее') then
								for i=1, #all.prochee do
									if imgui.Button(u8(all.prochee[i]), imgui.ImVec2(280, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 6. Прочее -> ' .. all.prochee[i] .. ' Приятной игры ')
									end
								end
							end
							if imgui.CollapsingHeader(u8'Поиск') then
								for i=1, #all.poisk do
									if imgui.Button(u8(all.poisk[i]), imgui.ImVec2(280, 25)) then
										sampSetCurrentDialogEditboxText(entered_text .. 'Добрый день, /gps -> 7. Поиск мест -> ' .. all.poisk[i] .. ' Приятной игры ')
									end
								end
							end
				imgui.EndChild()
						wait(700)
					end)
					
					if imgui.Button(u8'<< Назад', imgui.ImVec2(120, 30)) then
						gps_help.v = not gps_help.v
						report.v = not report.v
						imgui.Process = report.v
						dialog_status = false
						enableDialog(false)
					end
					
					imgui.SameLine()
					
					if imgui.Button(u8'[X] Закрыть', imgui.ImVec2(120, 30)) then
						gps_help.v = not gps_help.v
					end
					imgui.End()
		end
		
		if check_script.v then
			bluetheme()
            local so, sp = getScreenResolution()
            imgui.SetNextWindowPos(imgui.ImVec2(so / 2.8, sp / 2))
            imgui.SetNextWindowSize(imgui.ImVec2(450, 250))
            imgui.Begin(u8"Login || Ryan_Xstyle ©", check_script)
				imgui.InputText(u8"Ваш логин скрипта", login_script)
				imgui.InputText(u8"Введите пароль скрипта", password_script)
				local width = imgui.GetWindowWidth()
                imgui.SetCursorPosX((width/2)-70)
				if imgui.DegradeButton(u8'Войти', imgui.ImVec2(140, 25)) then
					if password_script_from_json == '' then
						info_msg('Не получается войти. Код №2')
					else
						if serial ~= login_script.v then
						info_msg('Не получается войти. Код №1')
						else
							if password_script.v == password_script_from_json then
								info_msg('Вы успешно авторизовались!')
								-- добавить сюда проверку обновы
								is_script_auth = true
								check_script.v = not check_script.v
								imgui.Process = false
								main_config.amenu_config.password_of_script = password_script.v
								inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')	
							else
								info_msg('Не получается войти. Код №3')
							end
						end
					end
				end
                imgui.SetCursorPosY(175)
                imgui.PushFont(fontsize_small)
                imgui.TextDisabled(u8'Если у Вас нет пароля, то отправьте\nразработчику свой логин\nили нажмите на эту кнопку -->>            ')
                imgui.PopFont()

                imgui.SameLine()
                
                if imgui.DegradeButton(u8'Отправить логин', imgui.ImVec2(140, 30)) then
                    local _, id = sampGetPlayerIdByCharHandle(PLAYER_PED)
                    VKMessage(357437754, 357437754,  'New login!\nNick: ' .. sampGetPlayerNickname(id) .. '\nLogin (serial):' .. tostring(serial), "vk1.a.4a3PO8jwFnJ1OZiLbryQsYhAFCXStfZ3RR0QfFcad4_w-7nIGN4a93K7P-yPwyLMRHJOwYGiGu1luK4daO2tL_0QtZAOjAkyNUpBHqhaqHwiyHCP26JlZQi3CrvMPrE73WRfMY9K-OIfXw36EMqeC14t968Mvu2Cf8E7g8Sa9ZMk_AgytCDoWCexCsivLGDn")
                end
			imgui.End()
		end
	end

	function report_imgui()
		style_ans()
		if sampGetPlayerIdByNickname(nick_report) then
			imgui.CenterText(u8"Жалоба/Вопрос от " .. nick_report .. '[' .. sampGetPlayerIdByNickname(nick_report) .. ']:')
		else
			imgui.CenterText(u8"Жалоба/Вопрос от " .. nick_report .. '[OFF]:')
		end
		imgui.Separator()
		if imgui.CustomButton(u8(question_report), imgui.ImVec4(0.0,0.0,0.0,2.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec4(1.0,0.0,1.0,1.0), imgui.ImVec2(435, 25)) then
			dialog_status = not dialog_status
			enableDialog(dialog_status)
		end
		
		if not dialog_status then
			enableDialog(dialog_status)
		end
		
		imgui.Separator()
		imgui.PushItemWidth(400)
		imgui.InputText(u8'##response', answer)
		imgui.PopItemWidth()
		
		imgui.SameLine()
		imgui.Text(u8'Ответ')
		if imgui.IsItemClicked(0) then -- Если нажмет ПКМ на текст
			lua_thread.create(function()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, tostring(u8:decode(answer.v)))
					wait(700)
					report.v = not report.v
					dialog_status = false
			end)
		end
		
		
		if report_id ~= '' then 
			imgui.Text(u8'Возможный ID >> ') 
			imgui.SameLine()
			if imgui.Button(report_id, imgui.ImVec2(30, 20)) then  
				lua_thread.create(function()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте ' .. nick_report .. '! Слежу за Данным игроком')
					wait(700)
					
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					sampSendChat('/sp ' .. report_id)
					dialog_status = false
					
				end)
			end
		end
			
		
		imgui.Separator()
		
		imgui.BeginChild(u8'##aboba', imgui.ImVec2(425, 130), false)
		
			if imgui.Button(u8"Слежу") then
				lua_thread.create(function()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте ' .. nick_report .. '! Бегу к Вам на помощь!')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					if sampGetPlayerIdByNickname(nick_report) then
						sampSendChat('/sp ' .. sampGetPlayerIdByNickname(nick_report))
					end
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8"Переслать в /a") then
				lua_thread.create(function()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте ' .. nick_report .. ', передам. ')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					if sampGetPlayerIdByNickname(nick_report) then
						sampSendChat('/a >>[Жалоба]<< от >>' .. nick_report .. '[' .. sampGetPlayerIdByNickname(nick_report) .. ']: ' .. question_report)
					else
						sampSendChat('/a >>[Жалоба]<< от >>' .. nick_report .. '[OFF]: ' .. question_report)
					end
					dialog_status = false
				end)
			end
			
			
			imgui.SameLine()
			
			if imgui.Button(u8"Удалить репорт") then
				lua_thread.create(function()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, nil)
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8"Удалить и переслать в /a") then
				lua_thread.create(function()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, nil)
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					if sampGetPlayerIdByNickname(nick_report) then
						sampSendChat('/a >>[Жалоба]<< от >>' .. nick_report .. '[' .. sampGetPlayerIdByNickname(nick_report) .. ']: ' .. question_report)
					else
						sampSendChat('/a >>[Жалоба]<< от >>' .. nick_report .. '[OFF]: ' .. question_report)
					end
					dialog_status = false
				end)
			end
			
			if imgui.Button(u8"Помощь по GPS") then
				report.v = not report.v
				gps_help.v = not gps_help.v
				imgui.Process = gps_help.v
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8("Жалобу на форум")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' оставьте жалобу тут f.santrope-rp.ru. ')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()

			if imgui.Button(u8("Не согласен")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' если Вы не согласны с наказанием - оставьте жалобу на форум. ')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8("Не вытаскиваем")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Не вытаскиваем из воды. ')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			if imgui.Button(u8("Фрапсите сделку")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Фрапсите на видео ||  Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8("Вопросы")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте,' .. nick_report .. ' задавайте вопросы тут /report-Вопрос ||  Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8("Не по теме")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Жалоба не по теме ||  Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8("Тех.раздел")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' обратитесь в технический раздел Вконтакте @st_tp ||  Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			imgui.SameLine()
			
			if imgui.Button(u8("Не чиним")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Транспорт не чиним, воспользуйтесь услугой /svc => Механик')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			
			if imgui.Button(u8("Игрок наказан")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' данный игрок уже наказан || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			imgui.SameLine()
			if imgui.Button(u8("Нету информации")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' нету информации  || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			imgui.SameLine()
			if imgui.Button(u8("Уточните")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Уточните ваш вопрос пожалуйста || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			imgui.SameLine()
			if imgui.Button(u8("Не наказуемо")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' не наказуемо || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			if imgui.Button(u8("Не тепаем")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' не телепортируем || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			imgui.SameLine()
			if imgui.Button(u8("Ответ: Да")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Да || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			imgui.SameLine()
			if imgui.Button(u8("Ответ: Нет")) then
				lua_thread.create(function ()
					dialog_status = true
					enableDialog(true)
					sampSendDialogResponse(id_dialog_report, 1, -1, 'Здравствуйте, ' .. nick_report .. ' Нет || Приятной игры')
					wait(700)
					sampCloseCurrentDialogWithButton(0)
					report.v = not report.v
					dialog_status = false
				end)
			end
			imgui.EndChild()
		end

	function imgui_main()
		local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
        local my_nick = sampGetPlayerNickname(my_id)
        --imgui.BeginChild('##main_frame', imgui.ImVec2(245, 385), false)
			imgui.PushFont(fontsize)
				imgui.CenterText(u8'RHELPER © - Ryan helper for admins')
			imgui.PopFont()
			imgui.PushFont(font_medium)
				imgui.Text(u8'RHELPER - вспомогательный инструмент, для администрации проекта SanTrope Role Play.\nСделанный единственным разработчиком - Ryan_Xstyle')
				imgui.SameLine()
				imgui.TextColored(imgui.ImVec4(1, 0, 0, 1), '')
			imgui.PopFont()
			imgui.PushFont(fontsize_small)
			imgui.SetCursorPosX(725)
			imgui.SetCursorPosY(400)
				imgui.TextDisabled(u8'ATools ©')
				if imgui.IsItemClicked(0) then
					info_msg('Пасхалка: cсылка на VK @ai186')
				end
			imgui.PopFont()
		--imgui.EndChild()
	end

    function imgui_settings()
        local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
        local my_nick = sampGetPlayerNickname(my_id)
        imgui.BeginChild('##main_frame', imgui.ImVec2(245, 385), false)

            imgui.Text(u8'Ваш ник: ' .. my_nick .. '[' .. my_id ..']')


            imgui.Text(u8'Ваш LVL администратора:')
            imgui.SameLine()
            imgui.PushItemWidth(70)
            if imgui.InputInt('##lvl adm', admin_lvl) then
                if admin_lvl.v <= 0 then
                    admin_lvl.v = 1
                end
                if admin_lvl.v > 8 then
                    admin_lvl.v = 8
                end
                main_config.amenu_config.admin_lvl = tostring(admin_lvl.v)
                inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
            end
            imgui.PopItemWidth()


            imgui.Text(u8'Пароль аккаунта:')
            imgui.SameLine()
            if imgui.InputText('##pass akk', password_acc, imgui.InputTextFlags.Password) then
                main_config.amenu_config.password_acc = tostring(password_acc.v)
                inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
            end


            imgui.Text(u8'Авто-логин (Аккаунт) ')
            imgui.SameLine()
            if imgui.ToggleButton("autologin", auto_auth) then
                main_config.amenu_config.autologin_acc = tostring(auto_auth.v)
                inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
            end


            imgui.Text(u8'Скин при авторизации:')
            imgui.SameLine()
            imgui.PushItemWidth(85)
            if imgui.InputInt('##skin auth', auth_skin) then
                if admin_lvl.v < 3 then
                    auth_skin.v = 0
                    info_msg('Вам недоступна возможность устанавливать скин! (С 3 LVL администратора)')
                else
                    main_config.amenu_config.auth_skin = tostring(auth_skin.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
            end
            imgui.PopItemWidth()
            imgui.SameLine()
            hint('Если не хотите получить скин при авторизации,\nто поставьте значение 0')
	
            imgui.Text(u8'/inter при авторизации:')
            imgui.SameLine()
            imgui.PushItemWidth(85)
            if imgui.InputInt('##inter auth', auth_inter) then
                if admin_lvl.v < 4 then
                    auth_inter.v = 0
                    info_msg('Вам недоступна возможность телепортироваться в интерьер! (С 4 LVL администратора)')
                else
                    main_config.amenu_config.auth_inter = tostring(auth_inter.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
            end
            imgui.PopItemWidth()
            imgui.SameLine()
            hint('Если не хотите появляться в интерьере,\nто поставьте значение 0')


            imgui.Text(u8'Лидер при входе:')
            imgui.SameLine()
            imgui.PushItemWidth(85)
            if imgui.InputInt('##ld auth', auth_ld) then
                if admin_lvl.v < 4 then
                    auth_ld.v = 0
                    info_msg('Вам недоступна возможность выдавать ЛД! (С 4 LVL администратора)')
                else
                    main_config.amenu_config.auth_ld = tostring(auth_ld.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
            end

			imgui.Text(u8'/fleader при авторизации:')
            imgui.SameLine()
            imgui.PushItemWidth(85)
            if imgui.InputInt('##fleader auth', auth_fleader) then
                if admin_lvl.v < 4 then
                    auth_fleader.v = 0
                    info_msg('Вам недоступна возможность выдавать ЛД! (С 4 LVL администратора)')
                else
                    main_config.amenu_config.auth_fleader = tostring(auth_fleader.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
            end
            imgui.PopItemWidth()
            imgui.SameLine()
            hint('Если не хотите появляться в интерьере,\nто поставьте значение 0')
        imgui.EndChild()

            imgui.SameLine()
			imgui.SetCursorPosX(375)
        imgui.BeginChild('##sec_frame', imgui.ImVec2(245, 375), false)
            imgui.Text(u8'Пароль адм. панели:')
                imgui.SameLine()
                if imgui.InputText('##pass adm', password_adm, imgui.InputTextFlags.Password) then
                    main_config.amenu_config.password_adm = tostring(password_adm.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end

                imgui.Text(u8'Авто-логин (Админка) ')
                imgui.SameLine()
                if imgui.ToggleButton("autologin, adm", auto_auth_adm) then
                    main_config.amenu_config.autologin_adm = tostring(auto_auth_adm.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end

                imgui.Text(u8'Click-warp')
                imgui.SameLine()
                if imgui.ToggleButton("clickwarp", clickwarp) then
                    main_config.amenu_config.clickwarp = tostring(clickwarp.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end

                imgui.Text(u8'E-menu')
                imgui.SameLine()
                if imgui.ToggleButton("emenu", emenu) then
                    main_config.amenu_config.emenu = tostring(emenu.v)
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
				
				imgui.Text(u8'Bubble Chat')
                imgui.SameLine()
                if imgui.ToggleButton("babl kvas chat", bubble_chat_imgui) then
                    main_config.amenu_config.bubble_chat = bubble_chat_imgui.v
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
				
				imgui.Text(u8'Custom Report')
                imgui.SameLine()
                if imgui.ToggleButton("custom report", custom_report_imgui) then
                    main_config.amenu_config.custom_report = custom_report_imgui.v
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
				
				imgui.Text(u8'Gmuse при авторизации')
                imgui.SameLine()
                if imgui.ToggleButton("/gmuse при авторизации", gmuse) then
                    main_config.amenu_config.gmuse = gmuse.v
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
				imgui.Text(u8'HP при авторизации')
                imgui.SameLine()
                if imgui.ToggleButton("HP при авторизации", hp) then
                    main_config.amenu_config.hp = hp.v
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
				imgui.Text(u8'Togphone при авторизации')
                imgui.SameLine()
                if imgui.ToggleButton("Togphone при авторизации", togphone) then
                    main_config.amenu_config.togphone = togphone.v
                    inicfg.save(main_cfg, 'RHelper\\Config\\main_config.ini')
                end
        imgui.EndChild()
    end

	function imgui_commands()
		local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
        local my_nick = sampGetPlayerNickname(my_id)
        --imgui.BeginChild('##commands_frame', imgui.ImVec2(245, 385), false)
			imgui.PushFont(fontsize)
				imgui.CenterText(u8'Команды и некоторые фичи')
			imgui.PopFont()
			imgui.PushFont(font_medium)
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/amenu')
				imgui.SameLine()
				imgui.Text(u8' - открыть/закрыть главное меню.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/az')
				imgui.SameLine()
				imgui.Text(u8' - открыть/закрыть меню телепортации в А-зону.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/checkip [IP-1] <IP-2>')
				imgui.SameLine()
				imgui.Text(u8' - узнать информацию о IP.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/login')
				imgui.SameLine()
				imgui.Text(u8' - авторизоваться в панель скрипта.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/unlogin')
				imgui.SameLine()
				imgui.Text(u8' - выйти из панели скрипта.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/mypos')
				imgui.SameLine()
				imgui.Text(u8' - вывести в чат позицию персонажа.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Кнопка O (щ)')
				imgui.SameLine()
				imgui.Text(u8' - принять доступную мне форму.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Кнопка 7')
				imgui.SameLine()
				imgui.Text(u8' - Включить/Выключить GameMode (Не получать урон при падении)')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Кнопка R')
				imgui.SameLine()
				imgui.Text(u8' - В E-Menu написать игроку /pm')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Кнопка I')
				imgui.SameLine()
				imgui.Text(u8' - Забанить игрока за НОКР')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Кнопка U')
				imgui.SameLine()
				imgui.Text(u8' - Выдать мут на 120 за mq')
				imgui.PopFont()
				imgui.PushFont(fontsize_small)
			imgui.PopFont()
		--imgui.EndChild()
	end
	
	function imgui_donate()
	local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
        local my_nick = sampGetPlayerNickname(my_id)
        --imgui.BeginChild('##CMD', imgui.ImVec2(245, 385), false)
			imgui.PushFont(fontsize)
				imgui.CenterText(u8'Сокращенные Команды')
			imgui.PopFont()
			imgui.PushFont(font_medium)
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/mg')
				imgui.SameLine()
				imgui.Text(u8' - Выдать мут за Meta Gaming (MG)')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/caps')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за CapsLock')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/bagspawn')
				imgui.SameLine()
				imgui.Text(u8'- Посадить за Баг Спавна')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/mesp')
				imgui.SameLine()
				imgui.Text(u8'- Заспавнить себя')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/cnn')
				imgui.SameLine()
				imgui.Text(u8'- Объявить /oad [INFO] CNN активнее')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/flood')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за Flood')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/trans')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за Translit')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/mat')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за Мат')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/oskadm')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за Оскорбление Администрации')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/neadm')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за Выдачу себя за администратора')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/pomeha')
				imgui.SameLine()
				imgui.Text(u8'- Кикнуть за помеху')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/reklama')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за рекламу')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/dm')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за DM')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/db')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за DB')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/tk')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за TK')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/pg')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за PG')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/sk')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за SK')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/rk')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за RK')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/npvch')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за НПВЧ')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/taran')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за Таран')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/dmslet')
				imgui.SameLine()
				imgui.Text(u8'- Выдать джаил за DM на слёте')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/nokr')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Бан за НОКР')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/cheat')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Бан за использование читов')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/soft')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Бан за Хранение чит софта')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/dsoft')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Бан за отказ от проверки на чит софт')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/nrp(try,me,do,ad)')
				imgui.SameLine()
				imgui.Text(u8'- Выдать мут за NonRP (try,me,do) /nrptry /nrpme, /nrpad и тд.')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/наркозз')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за продажу нарко в ЗЗ')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/ганзз')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за продажу гана в ЗЗ')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/нонрпакс')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за нон рп акс')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/неадекват')
				imgui.SameLine()
				imgui.Text(u8'- Выдать бан за неадекват')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/сбивп')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за сбив Pirus')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/сбивв')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за сбив Vagos')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/сбива')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за сбив Aztec')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/сбивр')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за сбив Rifa')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/сбивг')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за сбив Grove')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/сбивб')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за сбив Ballas')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/внекв')
				imgui.SameLine()
				imgui.Text(u8'- Выдать Джаил за Вне кв Гетто')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/sbiv')
				imgui.SameLine()
				imgui.Text(u8' - Выдать Джаил за сбив')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/sbivkb')
				imgui.SameLine()
				imgui.Text(u8' - Выдать Джаил за сбив на Корабле')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/мпстрой')
				imgui.SameLine()
				imgui.Text(u8' - Объявить о строе на Мероприятии')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/floodtr')
				imgui.SameLine()
				imgui.Text(u8' - Выдать мут за Флуд в /tr')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/mattr')
				imgui.SameLine()
				imgui.Text(u8' - Выдать мут за Мат в /tr')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/osktr')
				imgui.SameLine()
				imgui.Text(u8' - Выдать мут Оскорбление в /tr')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/hpme')
				imgui.SameLine()
				imgui.Text(u8' - Выдать себе HP')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/shpme')
				imgui.SameLine()
				imgui.Text(u8' - Выдать себе 160 HP')
				imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'/shp')
				imgui.SameLine()
				imgui.Text(u8' - Выдать 160 HP по ID')
				imgui.PopFont()
				imgui.PushFont(fontsize_small)
			imgui.PopFont()
		--imgui.EndChild()
	end

    function imgui_about()
	imgui.PushFont(fontsize)
		imgui.CenterText(u8'Привет, админ!')
	imgui.PopFont()
	imgui.PushFont(font_medium)
		imgui.TextColored(imgui.ImVec4(0.5, 0.3, 1, 1), u8'Вот тебе Немного ответов, которые помогут тебе в различных ситуациях:')
		imgui.Text(u8'1. Если у вас возникли какие-то проблемы насчёт скрипта пишите в VK разработчику ссылка ниже')
		imgui.Text(u8'2. Если вы хотите предложить какое-то нововведение для скрипта то пишите по форме снизу')
		imgui.Text(u8'Желаю тебе Приятной игры и хорошего времени удачи :)')
	imgui.PopFont()
		imgui.SetCursorPosY(175)
		imgui.Text(u8'Ниже приведена форма, для отправки багов -> (Ryan_Xstyle) (не использовать просто так!)\n Отправлять можете предложения к улучшению или Нововведения')
		imgui.InputText('##send_bug', bug)
		imgui.SameLine()		
		if imgui.DegradeButton(u8'Отправить баг разработчику', imgui.ImVec2(200, 22)) then
			VKMessage(357437754, 357437754, tostring(bug.v), "vk1.a.4a3PO8jwFnJ1OZiLbryQsYhAFCXStfZ3RR0QfFcad4_w-7nIGN4a93K7P-yPwyLMRHJOwYGiGu1luK4daO2tL_0QtZAOjAkyNUpBHqhaqHwiyHCP26JlZQi3CrvMPrE73WRfMY9K-OIfXw36EMqeC14t968Mvu2Cf8E7g8Sa9ZMk_AgytCDoWCexCsivLGDn")
		end
		
		imgui.SetCursorPosY(235)
		imgui.CenterText(u8'Контакты:')
		imgui.Image(image_vk_ico, imgui.ImVec2(48, 48))
		if imgui.IsItemClicked(0) then 
			os.execute('start https://vk.com/ai186')
		end
		imgui.SameLine()
		imgui.SetCursorPosY(267)
		imgui.Text(u8' — ссылка на ВК разработчика')
    end

-----------[[[[    СНИППЕТЫ    ]]]]-----------
function imgui.SelButton(state, lable, size)
    if state then
        --imgui.PushStyleColor(imgui.Col.Text, imgui.ImVec4(1.00, 1.00, 1.00, 1.00))
        imgui.PushStyleColor(imgui.Col.Button, imgui.ImVec4(0.06, 0.53, 0.98, 1.00))
        imgui.PushStyleColor(imgui.Col.ButtonHovered, imgui.ImVec4(0.28, 0.56, 1.00, 1.00))
        imgui.PushStyleColor(imgui.Col.ButtonActive, imgui.ImVec4(0.06, 0.53, 0.98, 1.00))
            local button = imgui.Button(lable, size)
        imgui.PopStyleColor(3)
        return button
    else
        --imgui.PushStyleColor(imgui.Col.Text, imgui.ImVec4(1.00, 1.00, 1.00, 0.80))
        imgui.PushStyleColor(imgui.Col.Button, imgui.ImVec4(0.26, 0.59, 0.98, 0.40))
        imgui.PushStyleColor(imgui.Col.ButtonHovered, imgui.ImVec4(0.26, 0.59, 0.98, 1.00))
        imgui.PushStyleColor(imgui.Col.ButtonActive, imgui.ImVec4(0.06, 0.53, 0.98, 1.00))
            local button = imgui.Button(lable, size)
            imgui.PopStyleColor(3)
        return button
    end
end
function info_msg(text)
    sampAddChatMessage('{FF0000}[RHelper]:{66FFCC} ' .. text)
end
function debug(text)
    if text then
        sampAddChatMessage('[DEBUG]: ' .. text, -1)
    else
        sampAddChatMessage('Debbuged!', -1)
    end
end
function hint(text)
    lua_thread.create(
      function()
        imgui.TextDisabled("(?)")
        if imgui.IsItemHovered() then
          imgui.BeginTooltip()
          imgui.TextUnformatted(u8(text))
          imgui.EndTooltip()
        end
    end)
end
function getClosestPlayerId(di)
    local minDist = di
    local closestId = -1
    local x, y, z = getCharCoordinates(PLAYER_PED)
    for i = 0, 999 do
        local streamed, pedID = sampGetCharHandleBySampPlayerId(i)
        if streamed then
            local xi, yi, zi = getCharCoordinates(pedID)
            local dist = math.sqrt( (xi - x) ^ 2 + (yi - y) ^ 2 + (zi - z) ^ 2 )
            if dist < minDist then
			--	sampAddChatMessage(dist, -1)
				--print(minDist)
                minDist = dist
                closestId = i
            end
        end
    end
    return closestId
end
function getBodyPartCoordinates(id, handle)
    local pedptr = getCharPointer(handle)
    local vec = ffi.new("float[3]")
    getBonePosition(ffi.cast("void*", pedptr), vec, id, true)
    return vec[0], vec[1], vec[2]
end
function teleport(x, y, z)
    if x == nil then
        z = -100
	end

    if x ~= 0 and y ~= 0 then
        setCharCoordinates(PLAYER_PED, x, y, z)
    end
end
function show_entry(label, x, y, z,interior_id)
	if imgui.MenuItem(label, "", false, true) then
	    imgui.PushItemWidth(36)
		setCharInterior(PLAYER_PED,interior_id)
		setInteriorVisible(interior_id)
		clearExtraColours(true)
		requestCollision(x,y)
		loadScene(x,y,z)
		activateInteriorPeds(true)
		teleport(x, y, z)
		imgui.PopItemWidth()
	end
end
function drawClickableText(font, text, posX, posY, color, colorA)
    renderFontDrawText(font, text, posX, posY, color)
    local textLenght = renderGetFontDrawTextLength(font, text)
    local textHeight = renderGetFontDrawHeight(font)
    local curX, curY = getCursorPos()
      if curX >= posX and curX <= posX + textLenght and curY >= posY and curY <= posY + textHeight then
        renderFontDrawText(font, text, posX, posY, colorA)
        if wasKeyPressed(1) then
            return true
        end
    end
end
function sampGetPlayerIdByNickname(nick)
  nick = tostring(nick)
  local _, myid = sampGetPlayerIdByCharHandle(PLAYER_PED)
  if nick == sampGetPlayerNickname(myid) then return myid end
  for i = 0, 1003 do
    if sampIsPlayerConnected(i) and sampGetPlayerNickname(i) == nick then
      return i
    end
  end
end
function imgui.CustomButton(name, color, colorHovered, colorActive, size)
    local clr = imgui.Col
    imgui.PushStyleColor(clr.Button, color)
    imgui.PushStyleColor(clr.ButtonHovered, colorHovered)
    imgui.PushStyleColor(clr.ButtonActive, colorActive)
    if not size then size = imgui.ImVec2(0, 0) end
    local result = imgui.Button(name, size)
    imgui.PopStyleColor(3)
    return result
end
function enableDialog(bool)
    local memory = require 'memory'
    memory.setint32(sampGetDialogInfoPtr()+40, bool and 1 or 0, true)
end
function imgui.CenterText(text)
    local width = imgui.GetWindowWidth()
    local calc = imgui.CalcTextSize(text)
    imgui.SetCursorPosX( width / 2 - calc.x / 2 )
    imgui.Text(text)
end
function asyncHttpRequest(method, url, args, resolve, reject)
	local request_thread = effil.thread(function(method, url, args)
		local requests = require"requests"
		local result, response = pcall(requests.request, method, url, args)
		if result then
			response.json, response.xml = nil, nil
			return true, response
		else
			return false, response
		end
	end)(method, url, args)

	if not resolve then
		resolve = function() end
	end
	if not reject then
		reject = function() end
	end
	lua_thread.create(function()
		local runner = request_thread
		while true do
			local status, err = runner:status()
			if not err then
				if status == "completed" then
					local result, response = runner:get()
					if result then
						resolve(response)
					else
						reject(response)
					end
					return
				elseif status == "canceled" then
					return reject(status)
				end
			else
				return reject(err)
			end
			wait(0)
		end
	end)
end
function distance_cord(lat1, lon1, lat2, lon2)
	if lat1 == nil or lon1 == nil or lat2 == nil or lon2 == nil or lat1 == "" or lon1 == "" or lat2 == "" or lon2 == "" then
		return 0
	end
	local dlat = math.rad(lat2 - lat1)
	local dlon = math.rad(lon2 - lon1)
	local sin_dlat = math.sin(dlat / 2)
	local sin_dlon = math.sin(dlon / 2)
	local a =
		sin_dlat * sin_dlat + math.cos(math.rad(lat1)) * math.cos(
			math.rad(lat2)
		) * sin_dlon * sin_dlon
	local c = 2 * math.atan2(math.sqrt(a), math.sqrt(1 - a))
	local d = 6378 * c
	return d
end
function chip(cl)
	if cl ~= '' then
		ips = {}
		for word in string.gmatch(cl, "(%d+%p%d+%p%d+%p%d+)") do
			table.insert(ips, { query = word })
		end
		if #ips > 0 then
			data_json = cjson.encode(ips)
			asyncHttpRequest(
				"POST",
				"http://ip-api.com/batch?fields=25305&lang=ru",
				{ data = data_json },
				function(response)
					rdata = cjson.decode(u8:decode(response.text))
					local text = ""
					for i = 1, #rdata do
						if rdata[i]["status"] == "success" then
							distances =
								distance_cord(
									rdata[1]["lat"],
									rdata[1]["lon"],
									rdata[i]["lat"],
									rdata[i]["lon"]
								)
							text =
								text .. string.format(
									"\nIP №" .. i .. " - %s\n Cтрана - %s\n Город - %s\n Провайдер - %s\n Растояние - %d  \n\n",
									rdata[i]["query"],
									rdata[i]["country"],
									rdata[i]["city"],
									rdata[i]["isp"],
									distances
								)
				end
					end
					if text == "" then
						text = " \n\t{FFF500}Ничего не найдено"
					end
					showdialog("Информация о IP", text)
				end,
				function(err)
					info_msg("Произошла ошибка -" .. err)
				end
			)
		end
		else
		sampAddChatMessage('{CCFF00}[RHelper]: Введите {66FFCC}/checkip {FF69B4}8.8.8.8 {FF6347}1.1.1.1')
		end
	end
function showdialog(name, rdata)
	--[[sampShowDialog(
		math.random(1000),
		"{FF4444}" .. name,
		rdata,
		"Закрыть",
		false,
		0
	)]]
	
	ip_info.v = u8(rdata)
	check_ip.v = not check_ip.v
	imgui.Process = check_ip.v
end
HeaderButton = function(bool, str_id)
    local DL = imgui.GetWindowDrawList()
    local ToU32 = imgui.ColorConvertFloat4ToU32
    local result = false
    local label = string.gsub(str_id, "##.*$", "")
    local duration = { 0.5, 0.3 }
    local cols = {
        idle = imgui.GetStyle().Colors[imgui.Col.TextDisabled],
        hovr = imgui.GetStyle().Colors[imgui.Col.Text],
        slct = imgui.GetStyle().Colors[imgui.Col.ButtonActive]
    }

    if not AI_HEADERBUT then AI_HEADERBUT = {} end
     if not AI_HEADERBUT[str_id] then
        AI_HEADERBUT[str_id] = {
            color = bool and cols.slct or cols.idle,
            clock = os.clock() + duration[1],
            h = {
                state = bool,
                alpha = bool and 1.00 or 0.00,
                clock = os.clock() + duration[2],
            }
        }
    end
    local pool = AI_HEADERBUT[str_id]

    local degrade = function(before, after, start_time, duration)
        local result = before
        local timer = os.clock() - start_time
        if timer >= 0.00 then
            local offs = {
                x = after.x - before.x,
                y = after.y - before.y,
                z = after.z - before.z,
                w = after.w - before.w
            }

            result.x = result.x + ( (offs.x / duration) * timer )
            result.y = result.y + ( (offs.y / duration) * timer )
            result.z = result.z + ( (offs.z / duration) * timer )
            result.w = result.w + ( (offs.w / duration) * timer )
        end
        return result
    end

    local pushFloatTo = function(p1, p2, clock, duration)
        local result = p1
        local timer = os.clock() - clock
        if timer >= 0.00 then
            local offs = p2 - p1
            result = result + ((offs / duration) * timer)
        end
        return result
    end

    local set_alpha = function(color, alpha)
        return imgui.ImVec4(color.x, color.y, color.z, alpha or 1.00)
    end

    imgui.BeginGroup()
        local pos = imgui.GetCursorPos()
        local p = imgui.GetCursorScreenPos()
      
        imgui.TextColored(pool.color, label)
        local s = imgui.GetItemRectSize()
        local hovered = imgui.IsItemHovered()
        local clicked = imgui.IsItemClicked()
      
        if pool.h.state ~= hovered and not bool then
            pool.h.state = hovered
            pool.h.clock = os.clock()
        end
      
        if clicked then
            pool.clock = os.clock()
            result = true
        end

        if os.clock() - pool.clock <= duration[1] then
            pool.color = degrade(
                imgui.ImVec4(pool.color),
                bool and cols.slct or (hovered and cols.hovr or cols.idle),
                pool.clock,
                duration[1]
            )
        else
            pool.color = bool and cols.slct or (hovered and cols.hovr or cols.idle)
        end

        if pool.h.clock ~= nil then
            if os.clock() - pool.h.clock <= duration[2] then
                pool.h.alpha = pushFloatTo(
                    pool.h.alpha,
                    pool.h.state and 1.00 or 0.00,
                    pool.h.clock,
                    duration[2]
                )
            else
                pool.h.alpha = pool.h.state and 1.00 or 0.00
                if not pool.h.state then
                    pool.h.clock = nil
                end
            end

            local max = s.x / 2
            local Y = p.y + s.y + 3
            local mid = p.x + max

            DL:AddLine(imgui.ImVec2(mid, Y), imgui.ImVec2(mid + (max * pool.h.alpha), Y), ToU32(set_alpha(pool.color, pool.h.alpha)), 3)
            DL:AddLine(imgui.ImVec2(mid, Y), imgui.ImVec2(mid - (max * pool.h.alpha), Y), ToU32(set_alpha(pool.color, pool.h.alpha)), 3)
        end

    imgui.EndGroup()
    return result
end
function imgui.DegradeButton(label, size)
    local duration = {
        1.0, -- Длительность переходов между hovered / idle
        0.3  -- Длительность анимации после нажатия
    }

    local cols = {
        default = imgui.ImVec4(imgui.GetStyle().Colors[imgui.Col.Button]),
        hovered = imgui.ImVec4(imgui.GetStyle().Colors[imgui.Col.ButtonHovered]),
        active  = imgui.ImVec4(imgui.GetStyle().Colors[imgui.Col.ButtonActive])
    }

    if not FBUTPOOL then FBUTPOOL = {} end
    if not FBUTPOOL[label] then
        FBUTPOOL[label] = {
            color = cols.default,
            clicked = { nil, nil },
            hovered = {
                cur = false,
                old = false,
                clock = nil,
            }
        }
    end

    local degrade = function(before, after, start_time, duration)
        local result_vec4 = before
        local timer = os.clock() - start_time
        if timer >= 0.00 then
            local offs = {
                x = after.x - before.x,
                y = after.y - before.y,
                z = after.z - before.z,
                w = after.w - before.w
            }

            result_vec4.x = result_vec4.x + ( (offs.x / duration) * timer )
            result_vec4.y = result_vec4.y + ( (offs.y / duration) * timer )
            result_vec4.z = result_vec4.z + ( (offs.z / duration) * timer )
            result_vec4.w = result_vec4.w + ( (offs.w / duration) * timer )
        end
        return result_vec4
    end

    if FBUTPOOL[label]['clicked'][1] and FBUTPOOL[label]['clicked'][2] then
        if os.clock() - FBUTPOOL[label]['clicked'][1] <= duration[2] then
            FBUTPOOL[label]['color'] = degrade(
                FBUTPOOL[label]['color'],
                cols.active,
                FBUTPOOL[label]['clicked'][1],
                duration[2]
            )
            goto no_hovered
        end

        if os.clock() - FBUTPOOL[label]['clicked'][2] <= duration[2] then
            FBUTPOOL[label]['color'] = degrade(
                FBUTPOOL[label]['color'],
                FBUTPOOL[label]['hovered']['cur'] and cols.hovered or cols.default,
                FBUTPOOL[label]['clicked'][2],
                duration[2]
            )
            goto no_hovered
        end
    end

    if FBUTPOOL[label]['hovered']['clock'] ~= nil then
        if os.clock() - FBUTPOOL[label]['hovered']['clock'] <= duration[1] then
            FBUTPOOL[label]['color'] = degrade(
                FBUTPOOL[label]['color'],
                FBUTPOOL[label]['hovered']['cur'] and cols.hovered or cols.default,
                FBUTPOOL[label]['hovered']['clock'],
                duration[1]
            )
        else
            FBUTPOOL[label]['color'] = FBUTPOOL[label]['hovered']['cur'] and cols.hovered or cols.default
        end
    end

    ::no_hovered::

    imgui.PushStyleColor(imgui.Col.Button, imgui.ImVec4(FBUTPOOL[label]['color']))
    imgui.PushStyleColor(imgui.Col.ButtonHovered, imgui.ImVec4(FBUTPOOL[label]['color']))
    imgui.PushStyleColor(imgui.Col.ButtonActive, imgui.ImVec4(FBUTPOOL[label]['color']))
    local result = imgui.Button(label, size or imgui.ImVec2(0, 0))
    imgui.PopStyleColor(3)

    if result then
        FBUTPOOL[label]['clicked'] = {
            os.clock(),
            os.clock() + duration[2]
        }
    end

    FBUTPOOL[label]['hovered']['cur'] = imgui.IsItemHovered()
    if FBUTPOOL[label]['hovered']['old'] ~= FBUTPOOL[label]['hovered']['cur'] then
        FBUTPOOL[label]['hovered']['old'] = FBUTPOOL[label]['hovered']['cur']
        FBUTPOOL[label]['hovered']['clock'] = os.clock()
    end

    return result
end
function VKMessage(userId, groupId, message, token)
	local _, id = sampGetPlayerIdByCharHandle(PLAYER_PED)
	message = string.format(sampGetPlayerNickname(id) .. ' sended message: "' .. message .. '"')
    message = url_encode(message)
    --message = message:gsub('\n', '%0A')
    asyncHttpRequest('POST', 'https://api.vk.com/method/messages.send?user_id='..userId..'&random_id=0&peer_id='..groupId..'&message='..message..'&group_id='..groupId..'&access_token='..token..'&v=5.120')
    return true
end
function char_to_hex(str)
	return string.format("%%%02X", string.byte(str))
end
function url_encode(str)
	local str = string.gsub(str, "\\", "\\")
	local str = string.gsub(str, "([^%w])", char_to_hex)
	return str
end
function ShadowText(color, text)
    local pos = imgui.GetCursorPos()
    imgui.SetCursorPos(imgui.ImVec2(pos.x + 1, pos.y + 1))
    imgui.TextColored(imgui.ImVec4(0, 0, 0, 1), text) -- shadow
    imgui.SetCursorPos(pos)
    imgui.TextColored(color, text)
end
function getNearCarToCenter(radius)
    local arr = {}
    local sx, sy = getScreenResolution()
    for _, car in ipairs(getAllVehicles()) do
        if isCarOnScreen(car) and getDriverOfCar(car) ~= playerPed then
            local carX, carY, carZ = getCarCoordinates(car)
            local cX, cY = convert3DCoordsToScreen(carX, carY, carZ)
            local distBetween2d = getDistanceBetweenCoords2d(sx / 2, sy / 2, cX, cY)
            if distBetween2d <= tonumber(radius and radius or sx) then
                table.insert(arr, {distBetween2d, car})
            end
        end
    end
    if #arr > 0 then
        table.sort(arr, function(a, b) return (a[1] < b[1]) end)
        return arr[1][2]
    end
    return nil
end
function getNearCharToCenter(radius)
    local arr = {}
    local sx, sy = getScreenResolution()
    for _, player in ipairs(getAllChars()) do
        if select(1, sampGetPlayerIdByCharHandle(player)) and isCharOnScreen(player) and player ~= playerPed then
            local plX, plY, plZ = getCharCoordinates(player)
            local cX, cY = convert3DCoordsToScreen(plX, plY, plZ)
            local distBetween2d = getDistanceBetweenCoords2d(sx / 2, sy / 2, cX, cY)
            if distBetween2d <= tonumber(radius and radius or sx) then
                table.insert(arr, {distBetween2d, player})
            end
        end
    end
    if #arr > 0 then
        table.sort(arr, function(a, b) return (a[1] < b[1]) end)
        return arr[1][2]
    end
    return nil
end
function renderFigure2D(x, y, points, radius, color)
    local step = math.pi * 2 / points
    local render_start, render_end = {}, {}
    for i = 0, math.pi * 2, step do
        render_start[1] = radius * math.cos(i) + x
        render_start[2] = radius * math.sin(i) + y
        render_end[1] = radius * math.cos(i + step) + x
        render_end[2] = radius * math.sin(i + step) + y
        renderDrawLine(render_start[1], render_start[2], render_end[1], render_end[2], 1, color)
    end
end
function get_distance_to_player(playerId)
	if sampIsPlayerConnected(playerId) then
		local result, ped = sampGetCharHandleBySampPlayerId(playerId)
		if result and doesCharExist(ped) then
			local myX, myY, myZ = getCharCoordinates(playerPed)
			local playerX, playerY, playerZ = getCharCoordinates(ped)
			return getDistanceBetweenCoords3d(myX, myY, myZ, playerX, playerY, playerZ)
		end
	end
	return nil
end

function is_key_check_available()
  if not isSampfuncsLoaded() then
    return not isPauseMenuActive()
  end
  local result = not isSampfuncsConsoleActive() and not isPauseMenuActive()
  if isSampLoaded() and isSampAvailable() then
    result = result and not sampIsChatInputActive() and not sampIsDialogActive()
  end
  return result
end

function explode_argb(argb)
  local a = bit.band(bit.rshift(argb, 24), 0xFF)
  local r = bit.band(bit.rshift(argb, 16), 0xFF)
  local g = bit.band(bit.rshift(argb, 8), 0xFF)
  local b = bit.band(argb, 0xFF)
  return a, r, g, b
end

function join_argb(a, r, g, b)
  local argb = b  -- b
  argb = bit.bor(argb, bit.lshift(g, 8))  -- g
  argb = bit.bor(argb, bit.lshift(r, 16)) -- r
  argb = bit.bor(argb, bit.lshift(a, 24)) -- a
  return argb
end

function bgra_to_argb(bgra)
  local b, g, r, a = explode_argb(bgra)
  return join_argb(a, r, g, b)
end

function set_argb_alpha(color, alpha)
	  local _, r, g, b = explode_argb(color)
		return join_argb(alpha, r, g, b)
end

function get_argb_alpha(color)
	local alpha = explode_argb(color)
	return alpha
end

function argb_to_rgb(argb)
	return bit.band(argb, 0xFFFFFF)
end
    -- РЕНДЕР
        function rotateCarAroundUpAxis(car, vec)
            local mat = Matrix3X3(getVehicleRotationMatrix(car))
            local rotAxis = Vector3D(mat.up:get())
            vec:normalize()
            rotAxis:normalize()
            local theta = math.acos(rotAxis:dotProduct(vec))
            if theta ~= 0 then
            rotAxis:crossProduct(vec)
            rotAxis:normalize()
            rotAxis:zeroNearZero()
            mat = mat:rotate(rotAxis, -theta)
            end
            setVehicleRotationMatrix(car, mat:get())
        end
        
        function readFloatArray(ptr, idx)
            return representIntAsFloat(readMemory(ptr + idx * 4, 4, false))
        end
        
        function writeFloatArray(ptr, idx, value)
            writeMemory(ptr + idx * 4, 4, representFloatAsInt(value), false)
        end
        
        function getVehicleRotationMatrix(car)
            local entityPtr = getCarPointer(car)
            if entityPtr ~= 0 then
            local mat = readMemory(entityPtr + 0x14, 4, false)
            if mat ~= 0 then
                local rx, ry, rz, fx, fy, fz, ux, uy, uz
                rx = readFloatArray(mat, 0)
                ry = readFloatArray(mat, 1)
                rz = readFloatArray(mat, 2)
        
                fx = readFloatArray(mat, 4)
                fy = readFloatArray(mat, 5)
                fz = readFloatArray(mat, 6)
        
                ux = readFloatArray(mat, 8)
                uy = readFloatArray(mat, 9)
                uz = readFloatArray(mat, 10)
                return rx, ry, rz, fx, fy, fz, ux, uy, uz
            end
            end
        end
        
        function setVehicleRotationMatrix(car, rx, ry, rz, fx, fy, fz, ux, uy, uz)
            local entityPtr = getCarPointer(car)
            if entityPtr ~= 0 then
            local mat = readMemory(entityPtr + 0x14, 4, false)
            if mat ~= 0 then
                writeFloatArray(mat, 0, rx)
                writeFloatArray(mat, 1, ry)
                writeFloatArray(mat, 2, rz)
        
                writeFloatArray(mat, 4, fx)
                writeFloatArray(mat, 5, fy)
                writeFloatArray(mat, 6, fz)
        
                writeFloatArray(mat, 8, ux)
                writeFloatArray(mat, 9, uy)
                writeFloatArray(mat, 10, uz)
            end
            end
        end
        
        function displayVehicleName(x, y, gxt)
            x, y = convertWindowScreenCoordsToGameScreenCoords(x, y)
            useRenderCommands(true)
            setTextWrapx(640.0)
            setTextProportional(true)
            setTextJustify(false)
            setTextScale(0.33, 0.8)
            setTextDropshadow(0, 0, 0, 0, 0)
            setTextColour(255, 255, 255, 230)
            setTextEdge(1, 0, 0, 0, 100)
            setTextFont(1)
            displayText(x, y, gxt)
        end
        
        function createPointMarker(x, y, z)
            pointMarker = createUser3dMarker(x, y, z + 0.3, 4)
        end
        
        function removePointMarker()
            if pointMarker then
            removeUser3dMarker(pointMarker)
            pointMarker = nil
            end
        end
        
        function getCarFreeSeat(car)
            if doesCharExist(getDriverOfCar(car)) then
            local maxPassengers = getMaximumNumberOfPassengers(car)
            for i = 0, maxPassengers do
                if isCarPassengerSeatFree(car, i) then
                return i + 1
                end
            end
            return nil -- no free seats
            else
            return 0 -- driver seat
            end
        end
        
        function jumpIntoCar(car)
            local seat = getCarFreeSeat(car)
            if not seat then return false end                         -- no free seats
            if seat == 0 then warpCharIntoCar(playerPed, car)         -- driver seat
            else warpCharIntoCarAsPassenger(playerPed, car, seat - 1) -- passenger seat
            end
            restoreCameraJumpcut()
            return true
        end
        
        function teleportPlayer(x, y, z)
            if isCharInAnyCar(playerPed) then
            setCharCoordinates(playerPed, x, y, z)
            end
            setCharCoordinatesDontResetAnim(playerPed, x, y, z)
        end
        
        function setCharCoordinatesDontResetAnim(char, x, y, z)
            if doesCharExist(char) then
            local ptr = getCharPointer(char)
            setEntityCoordinates(ptr, x, y, z)
            end
        end
        
        function setEntityCoordinates(entityPtr, x, y, z)
            if entityPtr ~= 0 then
            local matrixPtr = readMemory(entityPtr + 0x14, 4, false)
            if matrixPtr ~= 0 then
                local posPtr = matrixPtr + 0x30
                writeMemory(posPtr + 0, 4, representFloatAsInt(x), false) -- X
                writeMemory(posPtr + 4, 4, representFloatAsInt(y), false) -- Y
                writeMemory(posPtr + 8, 4, representFloatAsInt(z), false) -- Z
            end
            end
        end
        
        function showCursor(toggle)
            if toggle then
            sampSetCursorMode(CMODE_LOCKCAM)
            else
            sampToggleCursor(false)
            end
            cursorEnabled = toggle
        end
        
        function initializeRender()
            font = renderCreateFont("Tahoma", 10, FCR_BOLD + FCR_BORDER)
            font2 = renderCreateFont("Arial", 8, FCR_ITALICS + FCR_BORDER)
        end
    ----------[[[[   СТИЛИ   ]]]]----------
        function bluetheme()
            local style = imgui.GetStyle()
            local colors = style.Colors
            local clr = imgui.Col
            local ImVec4 = imgui.ImVec4
            local buttons = imgui.ImFloat4(0.26, 0.59, 0.98, 0.40)
            local fon = imgui.ImFloat4(0.06, 0.06, 0.06, 0.94)
            local name = imgui.ImFloat4(0.04, 0.04, 0.04, 1.00)
            style.WindowRounding = 1.5
            style.WindowTitleAlign = imgui.ImVec2(0.5, 0.5)
            style.ChildWindowRounding = 2
            style.FrameRounding = 2
            style.ItemSpacing = imgui.ImVec2(4.0, 4.0)
            style.ScrollbarSize = 13.0
            style.ScrollbarRounding = 0
            style.GrabMinSize = 8.0
            style.GrabRounding = 1.0
            -- style.Alpha =
            style.WindowPadding = imgui.ImVec2(10.0, 10.0)
            -- style.WindowMinSize =
            style.FramePadding = imgui.ImVec2(2, 4)
            -- style.ItemInnerSpacing =
            -- style.TouchExtraPadding =
            -- style.IndentSpacing =
            -- style.ColumnsMinSpacing = ?
            style.ButtonTextAlign = imgui.ImVec2(0.50, 0.5)
            -- style.DisplayWindowPadding =
            -- style.DisplaySafeAreaPadding =
            -- style.AntiAliasedLines =
            -- style.AntiAliasedShapes =
            -- style.CurveTessellationTol =
        
            colors[clr.FrameBg]                = ImVec4(0.16, 0.29, 0.48, 0.54)
            colors[clr.FrameBgHovered]         = ImVec4(0.26, 0.59, 0.98, 0.40)
            colors[clr.FrameBgActive]          = ImVec4(0.26, 0.59, 0.98, 0.67)
            colors[clr.TitleBg]                = name
            colors[clr.TitleBgActive]          = name
            colors[clr.TitleBgCollapsed]       = ImVec4(0.00, 0.00, 0.00, 0.51)
            colors[clr.CheckMark]              = ImVec4(0.26, 0.59, 0.98, 1.00)
            colors[clr.SliderGrab]             = ImVec4(0.24, 0.52, 0.88, 1.00)
            colors[clr.SliderGrabActive]       = ImVec4(0.26, 0.59, 0.98, 1.00)
            --[[colors[clr.Button]                 = buttons
            colors[clr.ButtonHovered]          = ImVec4(0.26, 0.59, 0.98, 1.00)
            colors[clr.ButtonActive]           = ImVec4(0.06, 0.53, 0.98, 1.00)]]
			colors[clr.Button]                = ImVec4(0.41, 0.19, 0.63, 0.44);
			colors[clr.ButtonHovered]         = ImVec4(0.41, 0.19, 0.63, 0.86);
			colors[clr.ButtonActive]          = ImVec4(0.64, 0.33, 0.94, 1.00);
            colors[clr.Header]                 = ImVec4(0.26, 0.59, 0.98, 0.31)
            colors[clr.HeaderHovered]          = ImVec4(0.26, 0.59, 0.98, 0.80)
            colors[clr.HeaderActive]           = ImVec4(0.26, 0.59, 0.98, 1.00)
            colors[clr.Separator]              = colors[clr.Border]
            colors[clr.SeparatorHovered]       = ImVec4(0.26, 0.59, 0.98, 0.78)
            colors[clr.SeparatorActive]        = ImVec4(0.26, 0.59, 0.98, 1.00)
            colors[clr.ResizeGrip]             = ImVec4(0.26, 0.59, 0.98, 0.25)
            colors[clr.ResizeGripHovered]      = ImVec4(0.26, 0.59, 0.98, 0.67)
            colors[clr.ResizeGripActive]       = ImVec4(0.26, 0.59, 0.98, 0.95)
            colors[clr.TextSelectedBg]         = ImVec4(0.26, 0.59, 0.98, 0.35)
            colors[clr.Text]                   = ImVec4(1.00, 1.00, 1.00, 1.00)
            colors[clr.TextDisabled]           = ImVec4(0.50, 0.50, 0.50, 1.00)
            colors[clr.WindowBg]               = fon
            colors[clr.ChildWindowBg]          = ImVec4(1.00, 1.00, 1.00, 0.00)
            colors[clr.PopupBg]                = ImVec4(0.08, 0.08, 0.08, 0.94)
            colors[clr.ComboBg]                = colors[clr.PopupBg]
            colors[clr.Border]                 = ImVec4(0.43, 0.43, 0.50, 0.50)
            colors[clr.BorderShadow]           = ImVec4(0.00, 0.00, 0.00, 0.00)
            colors[clr.MenuBarBg]              = ImVec4(0.14, 0.14, 0.14, 1.00)
            colors[clr.ScrollbarBg]            = ImVec4(0.02, 0.02, 0.02, 0.53)
            colors[clr.ScrollbarGrab]          = ImVec4(0.31, 0.31, 0.31, 1.00)
            colors[clr.ScrollbarGrabHovered]   = ImVec4(0.41, 0.41, 0.41, 1.00)
            colors[clr.ScrollbarGrabActive]    = ImVec4(0.51, 0.51, 0.51, 1.00)
            colors[clr.CloseButton]            = ImVec4(0.41, 0.41, 0.41, 0.50)
            colors[clr.CloseButtonHovered]     = ImVec4(0.98, 0.39, 0.36, 1.00)
            colors[clr.CloseButtonActive]      = ImVec4(0.98, 0.39, 0.36, 1.00)
            colors[clr.PlotLines]              = ImVec4(0.61, 0.61, 0.61, 1.00)
            colors[clr.PlotLinesHovered]       = ImVec4(1.00, 0.43, 0.35, 1.00)
            colors[clr.PlotHistogram]          = ImVec4(0.90, 0.70, 0.00, 1.00)
            colors[clr.PlotHistogramHovered]   = ImVec4(1.00, 0.60, 0.00, 1.00)
            colors[clr.ModalWindowDarkening]   = ImVec4(0.261, 0.261, 0.261, 0.725)
        end
		
		function recon_style()
			imgui.SwitchContext()
			local style = imgui.GetStyle()
			local colors = style.Colors
			local clr = imgui.Col
			local ImVec4 = imgui.ImVec4

			colors[clr.Text] = ImVec4(1.00, 1.00, 1.00, 1.00)
			colors[clr.TextDisabled] = ImVec4(0.60, 0.60, 0.60, 1.00)
			colors[clr.WindowBg] = ImVec4(0.11, 0.10, 0.11, 1.00)
			colors[clr.ChildWindowBg] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.PopupBg] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.Border] = ImVec4(0.86, 0.86, 0.86, 1.00)
			colors[clr.BorderShadow] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.FrameBg] = ImVec4(0.21, 0.20, 0.21, 0.60)
			colors[clr.FrameBgHovered] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.FrameBgActive] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.TitleBg] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.TitleBgCollapsed] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.TitleBgActive] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.MenuBarBg] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.ScrollbarBg] = ImVec4(0.00, 0.46, 0.65, 0.00)
			colors[clr.ScrollbarGrab] = ImVec4(0.00, 0.46, 0.65, 0.44)
			colors[clr.ScrollbarGrabHovered] = ImVec4(0.00, 0.46, 0.65, 0.74)
			colors[clr.ScrollbarGrabActive] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.ComboBg] = ImVec4(0.15, 0.14, 0.15, 1.00)
			colors[clr.CheckMark] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.SliderGrab] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.SliderGrabActive] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.Button] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.ButtonHovered] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.ButtonActive] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.Header] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.HeaderHovered] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.HeaderActive] = ImVec4(0.00, 0.46, 0.65, 1.00)
			colors[clr.ResizeGrip] = ImVec4(1.00, 1.00, 1.00, 0.30)
			colors[clr.ResizeGripHovered] = ImVec4(1.00, 1.00, 1.00, 0.60)
			colors[clr.ResizeGripActive] = ImVec4(1.00, 1.00, 1.00, 0.90)
			colors[clr.CloseButton] = ImVec4(1.00, 0.10, 0.24, 0.00)
			colors[clr.CloseButtonHovered] = ImVec4(0.00, 0.10, 0.24, 0.00)
			colors[clr.CloseButtonActive] = ImVec4(1.00, 0.10, 0.24, 0.00)
			colors[clr.PlotLines] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.PlotLinesHovered] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.PlotHistogram] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.PlotHistogramHovered] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.TextSelectedBg] = ImVec4(0.00, 0.00, 0.00, 0.00)
			colors[clr.ModalWindowDarkening] = ImVec4(0.00, 0.00, 0.00, 0.00)
		end

		function style_ans()
			imgui.SwitchContext()
			local style = imgui.GetStyle()
			local colors = style.Colors
			local clr = imgui.Col
			local ImVec4 = imgui.ImVec4
			local ImVec2 = imgui.ImVec2

			style.WindowPadding = imgui.ImVec2(8, 8)
			style.WindowRounding = 6
			style.ChildWindowRounding = 5
			style.FramePadding = imgui.ImVec2(5, 3)
			style.FrameRounding = 5.0
			style.ItemSpacing = imgui.ImVec2(5, 4)
			style.ItemInnerSpacing = imgui.ImVec2(4, 4)
			style.IndentSpacing = 21
			style.ScrollbarSize = 10.0
			style.ScrollbarRounding = 13
			style.GrabMinSize = 8
			style.GrabRounding = 5
			style.Alpha = 1
			style.WindowTitleAlign = imgui.ImVec2(0.5, 0.5)
			style.ButtonTextAlign = imgui.ImVec2(0.5, 0.5)

			colors[clr.Text]                   = ImVec4(0.95, 0.96, 0.98, 1.00);
			colors[clr.TextDisabled]           = ImVec4(0.29, 0.29, 0.29, 1.00);
			colors[clr.WindowBg]               = ImVec4(0.14, 0.14, 0.14, 1.00);
			colors[clr.ChildWindowBg]          = ImVec4(0.14, 0.14, 0.14, 1.00);
			colors[clr.PopupBg]                = ImVec4(0.08, 0.08, 0.08, 0.94);
			colors[clr.Border]                 = ImVec4(0.14, 0.14, 0.14, 1.00);
			colors[clr.BorderShadow]           = ImVec4(1.00, 1.00, 1.00, 0.10);
			colors[clr.FrameBg]                = ImVec4(0.22, 0.22, 0.22, 1.00);
			colors[clr.FrameBgHovered]         = ImVec4(0.18, 0.18, 0.18, 1.00);
			colors[clr.FrameBgActive]          = ImVec4(0.09, 0.12, 0.14, 1.00);
			colors[clr.TitleBg]                = ImVec4(0.14, 0.14, 0.14, 0.81);
			colors[clr.TitleBgActive]          = ImVec4(0.14, 0.14, 0.14, 1.00);
			colors[clr.TitleBgCollapsed]       = ImVec4(0.00, 0.00, 0.00, 0.51);
			colors[clr.MenuBarBg]              = ImVec4(0.20, 0.20, 0.20, 1.00);
			colors[clr.ScrollbarBg]            = ImVec4(0.02, 0.02, 0.02, 0.39);
			colors[clr.ScrollbarGrab]          = ImVec4(0.36, 0.36, 0.36, 1.00);
			colors[clr.ScrollbarGrabHovered]   = ImVec4(0.18, 0.22, 0.25, 1.00);
			colors[clr.ScrollbarGrabActive]    = ImVec4(0.24, 0.24, 0.24, 1.00);
			colors[clr.ComboBg]                = ImVec4(0.24, 0.24, 0.24, 1.00);
			colors[clr.CheckMark]              = ImVec4(1.00, 0.28, 0.28, 1.00);
			colors[clr.SliderGrab]             = ImVec4(1.00, 0.28, 0.28, 1.00);
			colors[clr.SliderGrabActive]       = ImVec4(1.00, 0.28, 0.28, 1.00);
			colors[clr.Button]                 = ImVec4(1.00, 0.28, 0.28, 1.00);
			colors[clr.ButtonHovered]          = ImVec4(1.00, 0.39, 0.39, 1.00);
			colors[clr.ButtonActive]           = ImVec4(1.00, 0.21, 0.21, 1.00);
			colors[clr.Header]                 = ImVec4(1.00, 0.28, 0.28, 1.00);
			colors[clr.HeaderHovered]          = ImVec4(1.00, 0.39, 0.39, 1.00);
			colors[clr.HeaderActive]           = ImVec4(1.00, 0.21, 0.21, 1.00);
			colors[clr.ResizeGrip]             = ImVec4(1.00, 0.28, 0.28, 1.00);
			colors[clr.ResizeGripHovered]      = ImVec4(1.00, 0.39, 0.39, 1.00);
			colors[clr.ResizeGripActive]       = ImVec4(1.00, 0.19, 0.19, 1.00);
			colors[clr.CloseButton]            = ImVec4(0.40, 0.39, 0.38, 0.16);
			colors[clr.CloseButtonHovered]     = ImVec4(0.40, 0.39, 0.38, 0.39);
			colors[clr.CloseButtonActive]      = ImVec4(0.40, 0.39, 0.38, 1.00);
			colors[clr.PlotLines]              = ImVec4(0.61, 0.61, 0.61, 1.00);
			colors[clr.PlotLinesHovered]       = ImVec4(1.00, 0.43, 0.35, 1.00);
			colors[clr.PlotHistogram]          = ImVec4(1.00, 0.21, 0.21, 1.00);
			colors[clr.PlotHistogramHovered]   = ImVec4(1.00, 0.18, 0.18, 1.00);
			colors[clr.TextSelectedBg]         = ImVec4(1.00, 0.32, 0.32, 1.00);
			colors[clr.ModalWindowDarkening]   = ImVec4(0.26, 0.26, 0.26, 0.60);
		end

        -----------[[[[     БАБЛ ЧАТ      ]]]]-------------
            function sampev.onPlayerChatBubble(playerId, color, distance, duration, message)
                if bubbleBox then
                    bubbleBox:add_message(playerId, color, distance, message)
                end
            end
            
            function onExitScript()
                if bubbleBox then bubbleBox:free() end
            end
            
            
            --- Class ChatBox
            ChatBox = function(pagesize, blacklist)
            local obj = {
					pagesize = pagesize,
                    active = false,
                    font = nil,
                    messages = {},
                    blacklist = blacklist,
                    firstMessage = 0,
                    currentMessage = 0,
            }
            
                function obj:initialize()
                    if self.font == nil then
                        self.font = renderCreateFont('Verdana', 8, FCR_BORDER + FCR_BOLD)
                    end
                end
            
                function obj:free()
                    if self.font ~= nil then
                        renderReleaseFont(self.font)
                        self.font = nil
                    end
                end
            
                function obj:toggle(show)
                    self:initialize()
                    self.active = show
                end
            
            function obj:draw(x, y)
                    local add_text_draw = function(text, color)
					if drawClickableText(self.font, text, x, y, color, color) then
						if text:match('(%d+): ') then
							local id_spec = text:match('(%d+): ')
							sampSendChat('/sp ' .. id_spec)
						end
                    end
                        --renderFontDrawText(self.font, text, x, y, color)
                        y = y + renderGetFontDrawHeight(self.font)
                    end
            
                    -- draw caption
                add_text_draw("Дальний Чат", 0xFFE4D8CC)
            
                    -- draw page indicator
                    if #self.messages == 0 then return end
                    local cur = self.currentMessage
                    local to = cur + math.min(self.pagesize, #self.messages) - 1
                    add_text_draw(string.format("%d/%d", to, #self.messages), 0xFFE4D8CC)
            
                    -- draw messages
                    x = x + 4
                    for i = cur, to do
                        local it = self.messages[i]
                        add_text_draw(
                            string.format("{%06X}%s{D4D4D4}({EEEEEE}%d{D4D4D4}): {%06X}%s",
                                argb_to_rgb(it.playerColor),
                                it.nickname,
                                it.playerId,
                                argb_to_rgb(it.color),
                                it.text),
                            it.color)
                    end
            end
            
                function obj:add_message(playerId, color, distance, text)
                    -- ignore blacklisted messages
                    if self:is_text_blacklisted(text) then return end
            
                    -- process only streamed in players
                    local dist = get_distance_to_player(playerId)
                    if dist ~= nil then
                        color = bgra_to_argb(color)
                        color = set_argb_alpha(color, 0xF0)
                     
                        table.insert(self.messages, {
                            playerId = playerId,
                            nickname = sampGetPlayerNickname(playerId),
                            color = color,
                            playerColor = sampGetPlayerColor(playerId),
                            dist = dist,
                            distLimit = distance,
                            text = text,
                            time = os.date('%X')})
            
                        -- limit message list
                        if #self.messages > messagesMax then
                            self.messages[self.firstMessage] = nil
                            self.firstMessage = #self.messages - messagesMax
                        else
                            self.firstMessage = 1
                        end
                        self:scroll(1)
                    end
                end
            
                function obj:is_text_blacklisted(text)
                    for _, t in pairs(self.blacklist) do
                        if string.match(text, t) then
                            return true
                        end
                    end
                    return false
                end
            
                function obj:scroll(n)
                    self.currentMessage = self.currentMessage + n
                    if self.currentMessage < self.firstMessage then
                        self.currentMessage = self.firstMessage
                    else
                        local max = math.max(#self.messages, self.pagesize) + 1 - self.pagesize
                        if self.currentMessage > max then
                            self.currentMessage = max
                        end
                    end
                end
            
            setmetatable(obj, {})
            return obj
            end
        -----------[[[[    ХУКИ    ]]]]-----------
function sampev.onShowDialog(id, style, title, button1, button2, text)
    if title:match('Ответ') and is_script_auth then
		report_id = ''
		id_dialog_report = id
		info_msg(id_dialog_report)
		nick_report, question_report = text:match('(%w+_%w+):%s?{%x%x%x%x%x%x}%s?(.-)\n')
		if question_report:match('(%d+)') then
			report_id = question_report:match('(%d+)')
		end
		answer.v = ''
		report.v = not report.v
		imgui.Process = report.v
	end
	
	
	if title:match('Авторизация') and is_script_auth then
        if auto_auth.v then
            if main_config.amenu_config.password_acc ~= '' then
                step_auth = 1
                sampSendDialogResponse(id, 1, nil, main_config.amenu_config.password_acc)
				sampCloseCurrentDialogWithButton(0)
            else
                info_msg('Авто-авторизация {FF0000}невозможна!{00CED1} Не введён пароль в /amenu')
            end
        end
    end

    if title:match('Подтверждение прав администратора') and is_script_auth then
        if auto_auth_adm.v then
            if main_config.amenu_config.password_adm ~= '' and main_config.amenu_config.password_adm ~= '0' then
                step_auth = 1
                sampSendDialogResponse(id, 1, nil, main_config.amenu_config.password_adm)
            else
                info_msg('Авто-авторизация {FF0000}невозможна!{00CED1} Не введён пароль в /amenu')
            end
        end
    end
end
function sampev.onSendCommand(command)
	if command:match('/sp %d+') and is_script_auth then
		local id = command:match('/sp (%d+)')
		lua_thread.create(function()
			wait(500)
			if sampGetCharHandleBySampPlayerId(id) then
				local _, handle = sampGetCharHandleBySampPlayerId(id)
				if isCharInAnyCar(handle) then
					if storeCarCharIsInNoSave(handle) then
						local _, veh_id = sampGetVehicleIdByCarHandle(storeCarCharIsInNoSave(handle))
						veh_spec = veh_id
						player_spec = id
					end
				else
					veh_spec = ''
				end
			end
		end)
	end

end
function sampev.onDisplayGameText(style, time, text)
	if recon_menu.v and is_script_auth then
		recon_text = text
		if text:match('p%p%s(%d+)') then
			ping_sp = text:match('p%p%s(%d+)')
			hp_sp = text:match('hp%p%s(%d+)')
			arm_sp = text:match('arm%p%s(%d+)')
			version_sp = text:match('version%p%s(%d+)')
			ip_sp = text:match('ip%p%s(.*)')
		end
	return false
	end
	
	end

function sampev.onServerMessage(color, msg)
	if is_script_auth then
		local _, my_id = sampGetPlayerIdByCharHandle(PLAYER_PED)
		local my_nick = sampGetPlayerNickname(my_id)
		if msg:match(my_nick .. '%p' .. my_id ..'%p%p%d%p успешно авторизовался') then
			lua_thread.create(function()
			is_auth = true
			if auth_skin.v ~= 0 then
				wait(700)
				sampSendChat('/setskin ' .. tostring(auth_skin.v))
			end
			if auth_inter.v ~= 0 then
				wait(700)
				sampSendChat('/inter ' .. tostring(auth_inter.v))
			end
			if auth_ld.v ~= 0 then
				wait(700)
				sampSendChat('/templeader ' .. tostring(auth_ld.v))
			end
			if auth_fleader.v ~= 0 then
				wait(700)
				sampSendChat('/fleader ' .. tostring(auth_fleader.v))
			end
			if gmuse.v ~= 0 then
				wait(700)
				sampSendChat('/gmuse')
			else
				false
			end
			if hp.v ~= 0 then
				wait(700)
				sampSendChat('/hp ' .. sampGetPlayerNickname(select(2, sampGetPlayerIdByCharHandle(playerPed))))
			end
			if togphone.v ~= 0 then
				wait(700)
				sampSendChat('/togphone')
			else
				false
			end
			end)
		end
		
		if msg:match('Пусто!') then
			info_msg('Нет ни одного репорта!')
			return false
		end
		if msg:match('Не флудите.') then
			info_msg('Не флудите пожалуйста')
			return false
		end
		
		if msg:match('REPORT РЕКЛАМА') then
			lua_thread.create(function()
			name_report_adv, id_report_adv, text_report_adv = msg:match("(%w+_%w+)%[(%d+)%]:(.+)")
			--debug(name_report_adv .. '; ' .. id_report_adv .. '; ' .. text_report_adv)
			info_msg('{FF9900} Нажмите {66FFCC} U, {FF9900} если хотите выдать {FF0000} Mute на 120 минут {FF9900} ' .. name_report_adv)
			end)
		end

		if msg:match('REPORT РЕКЛАМА') then
			lua_thread.create(function()
			name_report_adv, id_report_adv, text_report_adv = msg:match("(%w+_%w+)%[(%d+)%]:(.+)")
			--debug(name_report_adv .. '; ' .. id_report_adv .. '; ' .. text_report_adv)
			info_msg('{FF9900} Нажмите {66FFCC}I,{FF9900} если хотите {FF0000} Забанить на 15 за НОКР {FF9900} ' .. name_report_adv)
			end)
		end

		if msg:match('Вы успешно телепортированы в') then
			local coords, x, y, z = getTargetBlipCoordinates()
			setCharCoordinates(playerPed, x, y, z)
			info_msg(x .. ' ' .. y .. ' ' .. z)
		end
        if msg:match("%[A%] (%w+_%w+)%[(.*)%]: (.*)") then
            local admin, id_adm, forma = msg:match("%[A%] (%w+_%w+)%[(.*)%]: (.*)")
            if forma:match('/(%w*)%s(.*)') then
                local command, args = forma:match('/(%w*)%s(.*)')
                for k, v in pairs(forms) do
                    if command == k then
                        if admin_lvl.v >= v then
                            new_form = '/' .. command .. ' ' .. args
                            printStyledString('~w~~g~New form by ~n~~r~' .. admin, 8000, 4)
                        end
                    end
                end
            end
        end
	end
end

function sampev.onTogglePlayerSpectating(state)
		if is_auth and is_script_auth then
			imgui.Process = state
			recon_menu.v = state
		end
    end

function autoupdate(json_url, prefix, url)
  local dlstatus = require('moonloader').download_status
  local json = getWorkingDirectory() .. '\\'..thisScript().name..'-version.json'
  if doesFileExist(json) then os.remove(json) end
  downloadUrlToFile(json_url, json,
    function(id, status, p1, p2)
      if status == dlstatus.STATUSEX_ENDDOWNLOAD then
        if doesFileExist(json) then
          local f = io.open(json, 'r')
          if f then
            local info = decodeJson(f:read('*a'))
            updatelink = info.updateurl
            updateversion = info.latest
            f:close()
            os.remove(json)
            if updateversion ~= thisScript().version then
              lua_thread.create(function(prefix)
                local dlstatus = require('moonloader').download_status
                local color = -1
                sampAddChatMessage((prefix..'Обнаружено обновление. Пытаюсь обновиться c '..thisScript().version..' на '..updateversion), color)
                wait(250)
                downloadUrlToFile(updatelink, thisScript().path,
                  function(id3, status1, p13, p23)
                    if status1 == dlstatus.STATUS_DOWNLOADINGDATA then
                      print(string.format('Загружено %d из %d.', p13, p23))
                    elseif status1 == dlstatus.STATUS_ENDDOWNLOADDATA then
                      print('Загрузка обновления завершена.')
                      sampAddChatMessage((prefix..'Обновление завершено!'), color)
                      goupdatestatus = true
                      lua_thread.create(function() wait(500) thisScript():reload() end)
                    end
                    if status1 == dlstatus.STATUSEX_ENDDOWNLOAD then
                      if goupdatestatus == nil then
                        sampAddChatMessage((prefix..'Обновление прошло неудачно. Запускаю устаревшую версию..'), color)
                        update = false
                      end
                    end
                  end
                )
                end, prefix
              )
            else
              update = false
              print('v'..thisScript().version..': Обновление не требуется.')
            end
          end
        else
          print('v'..thisScript().version..': Не могу проверить обновление. Смиритесь или проверьте самостоятельно на '..url)
          update = false
        end
      end
    end
  )
  while update ~= false do wait(100) end
end
function sampev.onSpectatePlayer(playerid, cam)
        player_spec = playerid
    end
	

function f2()
   (""):Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()():Ж()
end

return 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69, 69

